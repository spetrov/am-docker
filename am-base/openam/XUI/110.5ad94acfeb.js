(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{559:function(t,e,a){"use strict";a(29),a(83),a(89),a(90),a(35),a(69),a(223);var s=a(16),n=a(0),r=a.n(n),i=a(2),o=a.n(i),c=a(379),u=a.n(c),l=a(86),h=(a(45),a(19),a(51),a(180)),d=a(4),p=function(t,e,a){return this.token=e,this.additional=a||"",h.a.call(this,"".concat(d.a.context,"/").concat(t))};(p.prototype=Object.create(h.a.prototype)).constructor=p,p.prototype.start=function(t){return t=t||{},this.lastResponse?o.a.Deferred().resolve(this.lastResponse):this.serviceCall({type:"GET",url:"",headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(r.a.bind(function(e){return function(t,e){var a,s=o.a.Deferred();return"parameters"===t.type?(a=r.a.intersection(r.a.keys(e),r.a.keys(t.requirements.properties)),this.lastResponse=t,this.submit(r.a.pick(e,a)).then(r.a.bind(function(t){var n=r.a.omit(e,a);r.a.isEmpty(n)?s.resolve(t):this.submit(n).then(s.resolve,s.reject)},this),s.reject)):r.a.isEmpty(e)?s.resolve(t):(this.lastResponse=t,this.submit(e).then(s.resolve,s.reject)),s}.call(this,e,t).then(r.a.bind(function(t){return this.lastResponse=t,this.lastResponse},this))},this))},p.prototype.submit=function(t){return(this.token||this.lastResponse?this.serviceCall({type:"POST",url:"?_action=submitRequirements".concat(this.additional),data:JSON.stringify({token:this.token,code:this.code,input:t}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},errorsHandlers:{failed:{status:"400"}}}):this.start(t)).then(r.a.bind(function(t){return r.a.has(t,"token")&&(this.token=t.token),r.a.has(t.requirements,"code")&&(this.code=t.requirements.code),this.lastResponse=t,t},this),r.a.bind(function(t){return delete this.token,delete this.lastResponse,r.a.has(t,"responseJSON.message")?{status:{success:!1,reason:t.responseJSON.message,code:t.responseJSON.code}}:t},this))};var f=p,m=a(176);function v(t){var e,a=o()(t);return a.hasClass("filter-value")&&a.val().length>0?"".concat(a.attr("name"),' eq "').concat(a.val().replace('"','\\"'),'"'):a.hasClass("filter-group")?0===(e=r.a.chain(a.find(">.form-group>.filter-value, >.filter-group")).map(v).filter(function(t){return t.length>0}).value()).length?"":1===e.length?e[0]:a.hasClass("filter-or")?"(".concat(e.join(" OR "),")"):"(".concat(e.join(" AND "),")"):""}function g(t,e){var a;return 409===t||r.a.startsWith(e,"ldap exception")||r.a.startsWith(e,"Resource already exists")?a=Object(s.b)("config.messages.UserMessages.registerDataInvalid"):400===t&&r.a.startsWith(e,"CONSTRAINT_VIOLATION")?a=Object(s.b)("config.messages.UserMessages.registerDataInvalid"):r.a.startsWith(e,"Identity names may not have a space character")&&(a=Object(s.b)("config.messages.UserMessages.registerDataInvalid")),a}a.d(e,"b",function(){return g});var b=l.a.extend({baseTemplate:"user/AnonymousProcessBaseTemplate",template:"user/AnonymousProcessWrapper",events:{"submit form":"formSubmit","click #restart":"restartProcess","change #userQuery :input":"buildQueryFilter","keyup #userQuery :input":"buildQueryFilter","customValidate #userQuery":"validateForm"},data:{i18n:{}},walkTreeForFilterStrings:v,getFormContent:function(){return"userQuery"===this.$el.find("form").attr("id")?{queryFilter:this.$el.find(":input[name=queryFilter]").val()}:u()(o()(this.element).find("form")[0])},formSubmit:function(t){var e=this.getFormContent();t.preventDefault(),this.service.submit(e).then(r.a.bind(this.renderProcessState,this),r.a.bind(this.renderProcessState,this))},parentRender:function(){l.a.prototype.parentRender.call(this,r.a.bind(function(){this.service.start().then(r.a.bind(this.renderProcessState,this))},this))},renderResponse:function(t){l.a.prototype.parentRender.call(this,r.a.bind(function(){this.renderProcessState(t)},this))},setService:function(t,e,a){this.service=new f(t,e,a)},submitService:function(t,e){this.service.submit(r.a.omit(t,"token")).always(e)},setTranslationBase:function(){r.a.each(["title","completed","failed","tryAgain","return"],r.a.bind(function(t){this.data.i18n[t]="".concat(this.i18nBase,".").concat(t)},this))},restartProcess:function(){},attemptCustomTemplate:function(t,e,a){var s=this;this.loadThemedTemplate("user/process/".concat(this.processType,"/").concat(e.type,"-").concat(e.tag)).then(function(e){var s=e(t);a.resolve(s)},function(){s.loadGenericTemplate(t,e,a)})},loadGenericTemplate:function(t,e,a){var s=r.a.has(e,"requirements")?"GenericInputForm":"GenericEndPage";this.loadThemedTemplate("user/process/".concat(s)).then(function(e){var s=e(t);a.resolve(s)})},renderProcessState:function(t){var e=o.a.Deferred();if(r.a.has(t,"requirements")?this.stateData=r.a.extend({requirements:t.requirements},this.data):this.stateData=r.a.extend({status:t.status,additions:t.additions},this.data),r.a.has(this.stateData,"status")&&!this.stateData.status.success){var a=g(this.stateData.status.code,this.stateData.status.reason);a&&(this.stateData.status.reason=a)}return r.a.has(t,"type")&&r.a.has(t,"tag")?this.attemptCustomTemplate(this.stateData,t,e):this.loadGenericTemplate(this.stateData,t,e),e.then(r.a.bind(function(t){this.$el.find("#processContent").html(t),m.a.bindValidators(this.$el,this.baseEntity,r.a.bind(function(){m.a.validateAllFields(this.$el)},this))},this))},buildQueryFilter:function(){this.$el.find(":input[name=queryFilter]").val(v(this.$el.find("#filterContainer"))),this.validateForm()},validateForm:function(){var t=this.$el.find("input[type=submit]"),e=!1;0!==this.$el.find(":input[name=queryFilter]").val().length?(this.$el.find(".filter-and").each(function(){v(this).length>0?e=!(r.a.reduce(o()(">.form-group>.filter-value",this),function(t,e){var a=e.value.length>0;return o()(e).attr("data-validation-status",a?"ok":"error"),t&&a},!0)&&r.a.reduce(o()(">.filter-group",this),function(t,e){return v(e).length>0},!0)):o()(">.form-group>.filter-value",this).attr("data-validation-status","ok")}),t.prop("disabled",e)):t.prop("disabled",!0)}});e.a=b},565:function(t,e,a){"use strict";a(84);var s=a(0),n=a.n(s),r=a(183),i=a(559),o=a(4),c=a(17),u=a(116),l=a(128),h=a(70),d=a(20),p=a(39),f=a(28);e.a=i.a.extend({render:function(){var t=this,e=Object(r.b)(f.a.getCurrentFragmentQueryString()),a=function(t){return t===o.a.SELF_SERVICE_REGISTER?d.a.configuration.routes.continueSelfRegister:t===o.a.SELF_SERVICE_RESET_PASSWORD?d.a.configuration.routes.continuePasswordReset:""}(this.endpoint),s=Object(u.a)("/".concat(this.endpoint),{realm:p.a.getState().remote.info.realm});this.service&&d.a.currentRoute===a||this.setService("json".concat(s),e.token),e.token?this.submitService(e,function(c){var u=n.a.get(c,"status"),l=u&&!1===u.success;if(function(t){return-1!==t.indexOf(o.a.SELF_SERVICE_RESET_PASSWORD)}(s)&&l)delete e.token,delete e.code,t.data.fragmentParamString=n.a.isEmpty(e)?"":"&".concat(Object(r.c)(e)),t.data.args=[void 0,t.data.fragmentParamString],t.setTranslationBase(),t.renderResponse(c);else if(function(t){return-1!==t.indexOf(o.a.SELF_SERVICE_REGISTER)}(s)&&l){var p=Object(i.b)(u.code,u.reason);p&&h.a.addMessage({message:p,type:h.a.TYPE_DANGER}),d.a.routeTo(d.a.currentRoute,{trigger:!0})}else d.a.routeTo(a,{trigger:!0})}):(t.data.fragmentParamString=Object(l.a)(),t.data.args=[void 0,t.data.fragmentParamString],t.setTranslationBase(),this.parentRender())},restartProcess:function(t){t.preventDefault(),delete this.delegateService,delete this.stateData,c.a.sendEvent(o.a.EVENT_CHANGE_VIEW,{args:this.data.args,route:n.a.extend({},d.a.currentRoute,{forceUpdate:!0})})}})},662:function(t,e,a){"use strict";a.r(e);var s=a(0),n=a.n(s),r=a(4),i=a(565),o=new(a(559).a.extend({processType:"username",i18nBase:"common.user.forgotUsername"}));function c(){}c.prototype=o,c.prototype.endpoint=r.a.SELF_SERVICE_FORGOTTEN_USERNAME,n.a.extend(c.prototype,i.a.prototype);e.default=new c}}]);
//# sourceMappingURL=110.5ad94acfeb.js.map