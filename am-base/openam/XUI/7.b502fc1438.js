(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{626:function(e,a,t){e.exports=t.p+"css/default-app.5f239a9557.svg"},632:function(e,a,t){"use strict";t.r(a);t(46),t(29),t(83),t(89),t(110),t(84),t(45),t(35),t(179),t(123),t(124),t(125),t(19),t(391),t(111),t(69),t(63),t(223),t(112),t(51);var n=t(0),i=t.n(n),l=t(2),r=t.n(l),o=t(379),s=t.n(o),c=t(13),u=t.n(c),p=t(16),d=t(631),g=t(278),m=t(183),f=t(86),b=t(372),h=t(3),v=t(4),k=t(277),y=t(128),C=t(165),P=t(380),w=t(381),O=t(70),S=t(17),D=t(68),x=t(385),T=t(369),L=function(e){var a=r.a.Deferred(),t=e&&e.submitContent||e||{};return x.a.login(t,function(e,t){Object(g.a)()?window.location.href=Object(g.f)():(h.a.setProperty("loggedUser",e),D.a.removeAnonymousDefaultHeaders(),h.a.globalData.xuiUserSessionValidationEnabled&&T.a.start(w.a,t),S.a.sendEvent(v.a.EVENT_HANDLE_DEFAULT_ROUTE),a.resolve(e))},function(t){t=t||"authenticationFailed",S.a.sendEvent(v.a.EVENT_DISPLAY_MESSAGE_REQUEST,t),e&&e.failureCallback&&e.failureCallback(t),a.reject(t)}),a},I=t(364),j=t(20),E=t(28),R=t(626),U=t.n(R);function A(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function F(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?A(t,!0).forEach(function(a){_(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(t).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function _(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function q(e){j.a.routeTo(j.a.configuration.routes.loginFailure,{args:[e],trigger:!0})}function N(e,a){return i.a.some(e,function(e){return e.type===a})}var M=f.a.extend({template:"openam/RESTLoginTemplate",baseTemplate:"common/LoginBaseTemplate",data:{},events:{"click input[type=submit]":"formSubmit","click button.js-select-idp-button":"selectIdpClick"},handleExistingSession:function(e){var a=this.$el;I.a.getLoggedUser(function(t,n){if(Object(C.a)())window.location.replace("#switchRealm/".concat(Object(y.a)()));else{if(h.a.setProperty("loggedUser",t),Object(g.c)(e.successUrl))return Object(g.e)(e.successUrl),window.location.href=Object(g.f)(),a.empty(),!1;Object(g.d)(),D.a.removeAnonymousDefaultHeaders(),h.a.globalData.xuiUserSessionValidationEnabled&&T.a.start(w.a,n),j.a.navigate("",{trigger:!0})}},function(){Object(P.a)()})},autoLogin:function(){var e,a={},t=h.a.globalData.auth;i.a.each(i.a.keys(t.urlParams),function(n){n.indexOf("IDToken")>-1&&(e=parseInt(n.substring(7),10)-1,a["callback_".concat(e)]=t.urlParams["IDToken".concat(n.substring(7))])}),t.autoLoginAttempts=1,L(a)},isZeroPageLoginAllowed:function(){var e=document.referrer,a=h.a.globalData.zeroPageLogin.refererWhitelist;return!!h.a.globalData.zeroPageLogin.enabled&&(e?!a||!a.length||a.indexOf(e)>-1:h.a.globalData.zeroPageLogin.allowedWithoutReferer)},selectIdpClick:function(e){var a=this,t=_({},e.target.name,e.target.value);r()("button.js-select-idp-button").prop("disabled",!0),this.loginRequestFunction({submitContent:t,failureCallback:function(){r()("button.js-select-idp-button").prop("disabled",!1),a.renderLoginFailure()}})},formSubmit:function(e){var a,t=this;e.preventDefault(),r()(e.currentTarget).prop("disabled",!0);var n=new s.a(this.$el[0]);n[r()(e.target).attr("name")]=r()(e.target).attr("index");var l=this.$el.find("input[data-consentCollector]");if(l.length){var o=l[l.length-1];l.each(function(e,a){a.checked=o.checked})}this.$el.find("input[type=checkbox]").each(function(e,a){n[a.name]=a.checked}),this.$el.find("input[type=number]").each(function(e,a){n[a.name]=parseInt(a.value,10)}),0!==this.$el.find("[name=loginRemember]:checked").length?((a=new Date).setDate(a.getDate()+20),k.a.setCookie("login",this.$el.find("input[type=text]:first").val(),a)):0!==this.$el.find("[name=loginRemember]").length&&k.a.deleteCookie("login"),i.a.each(n,function(e,a){if(a.includes("_kba_")){var t=a.split("_kba_"),i=t[0],l=parseInt(t[1],10);n[i]?n[i][l]=e:n[i]=[e],delete n[a]}}),this.loginRequestFunction({submitContent:n,failureCallback:function(){r()(e.currentTarget).prop("disabled",!1),r()("input[type='password']").val(""),t.renderLoginFailure()}})},renderLoginFailure:function(){if(h.a.globalData.auth.currentStage>1){var e=E.a.getCurrentFragmentQueryString();e&&(e="&".concat(e)),q(e)}},moveLegacyRealmFragmentToQuery:function(e){var a=e.realm;delete e.realm;var t="#login".concat(i.a.isEmpty(e)?"":"&".concat(Object(m.c)(e))),n="?".concat(Object(m.c)(F({realm:a},Object(m.b)(E.a.getCurrentQueryString()))));return"".concat(E.a.getCurrentPathName()).concat(n).concat(t)},getUrlWithoutNewSessionParameters:function(){var e=function(e,a){var t=Object(m.b)(e);return"newsession"===t.arg&&delete t.arg,i.a.isEmpty(t)?"":"".concat(a).concat(Object(m.c)(t))},a=e(E.a.getCurrentQueryString(),"?"),t=e(E.a.getCurrentFragmentQueryString(),"&");return"".concat(E.a.getCurrentPathName()).concat(a,"#login").concat(t)},render:function(e){var a=this,t=Object(m.b)(E.a.getCurrentFragmentQueryString());if(t.realm)location.href=this.moveLegacyRealmFragmentToQuery(t);else{var n=e?e[1]:void 0,l={},r=h.a.globalData.auth;this.data.fragmentParamString=Object(y.a)(),this.data.args=[void 0,this.data.fragmentParamString];var o=F({},t,{},Object(m.b)(E.a.getCurrentQueryString()));delete o.service,this.data.queryStringExclServiceParam="",this.data.queryStringExclServiceParam=i.a.isEmpty(o)?"":"&".concat(Object(m.c)(o)),e&&(r.additional=n,r.urlParams={},(l=this.handleParams()).IDToken1&&this.isZeroPageLoginAllowed()&&!r.autoLoginAttempts&&this.autoLogin()),b.a.getRequirements().then(function(e){if(e.hasOwnProperty("tokenId")&&"newsession"===l.arg){var t=a.getUrlWithoutNewSessionParameters();Object(P.a)().then(function(){window.location.href=t},function(){window.location.href=t})}else if(e.hasOwnProperty("tokenId"))a.handleExistingSession(e);else if(e.hasOwnProperty("type")&&"error"===e.type&&e.hasOwnProperty("message")){O.a.addMessage({type:O.a.TYPE_DANGER,message:e.message});var n=E.a.getCurrentFragmentQueryString();q(I.a.filterUrlParams(Object(m.b)(n)))}else a.loginRequestFunction=L,a.renderForm(e,l)},function(e){if(i.a.has(e,"message")&&O.a.addMessage({type:O.a.TYPE_DANGER,message:e.message}),i.a.has(e,"detail.failureUrl")&&!i.a.isEmpty(e.detail.failureUrl))window.location.href=e.detail.failureUrl;else{var a=E.a.getCurrentFragmentQueryString();q(I.a.filterUrlParams(Object(m.b)(a)))}})}},isUsernamePasswordStage:function(e){return!!i.a.includes(["DataStore1","AD1","JDBC1","LDAP1","Membership1","RADIUS1"],e.stage)||e.callbacks&&N(e.callbacks,"NameCallback")},lastIndexOfCallbacksOfType:function(e,a){return i.a.findLastIndex(e,function(e){return e.type===a})},renderForm:function(e,a){var t=this,n=i.a.clone(e),l=r.a.Deferred(),o=this;this.userNamePasswordStage=this.isUsernamePasswordStage(e);var s=[];n.callbacks=[];var c=e.callbacks.every(function(e){return"SelectIdPCallback"===e.type}),u=e.callbacks.every(function(e){return"DeviceProfileCallback"===e.type});if(i.a.each(e.callbacks,function(a,l){if("RedirectCallback"===a.type){var o=i.a.fromPairs(i.a.map(a.output,function(e){return[e.name,e.value]})),p=r()("<form action='".concat(o.redirectUrl,"' method='POST'></form>"));"POST"===o.redirectMethod?(i.a.each(o.redirectData,function(e,a){p.append("<input type='hidden' name='".concat(a,"' value='").concat(e,"' aria-hidden='true' />"))}),p.appendTo("body").submit()):window.location.replace(o.redirectUrl)}else if("PollingWaitCallback"===a.type){var g=i.a.find(a.output,{name:"waitTime"}).value;i.a.delay(function(){t.pollingInProgress=!0,N(t.reqs.callbacks,"PollingWaitCallback")&&L()},g)}else if("DeviceProfileCallback"===a.type){if(a.output.push({name:"onlyCallback",value:u}),u)(new d.a).getProfile({location:i.a.find(a.output,{name:"location"}).value,metadata:i.a.find(a.output,{name:"metadata"}).value}).then(function(e){a.input[0].value=JSON.stringify(e),L()}).catch(function(){a.input[0].value="",L()})}"KbaCreateCallback"===a.type?n.callbacks.push({input:[{index:n.callbacks.length,name:a.input?a.input[0].name:null,value:a.input?a.input[0].value:null},{index:n.callbacks.length,name:a.input?a.input[1].name:null,value:a.input?a.input[1].value:null}],output:a.output,type:a.type}):n.callbacks.push({input:{index:n.callbacks.length,name:a.input?a.input[0].name:null,value:a.input?a.input[0].value:null},output:a.output,type:a.type}),"ConsentMappingCallback"===a.type?(n.callbacks[l].output.allConsentMappingOutputs=s,n.callbacks[l].output.isLast=t.lastIndexOfCallbacksOfType(e.callbacks,"ConsentMappingCallback")===l,n.callbacks[l].output.index=l,s.push(n.callbacks[l].output)):"SelectIdPCallback"===a.type&&(n.callbacks[l].onlyCallback=c)}),!(N(e.callbacks,"ConfirmationCallback")||N(e.callbacks,"PollingWaitCallback")||N(e.callbacks,"RedirectCallback")||N(e.callbacks,"SuspendedTextOutputCallback")||u||c)){var g={input:{index:n.callbacks.length,name:"loginButton",value:0},output:[{name:"options",value:[p.a.t("common.user.login")]}],type:"ConfirmationCallback"};n.callbacks.push(g)}var m=e.callbacks&&!this.reqs||!i.a.isEqual(e.callbacks,this.reqs.callbacks),f=this.pollingInProgress||N(e.callbacks,"PollingWaitCallback");if(this.reqs=e,this.data.reqs=n,a.IDToken1&&1===h.a.globalData.auth.autoLoginAttempts)h.a.globalData.auth.autoLoginAttempts++;else if(m||!f){this.pollingInProgress=!1;var b=function(){(function(){var e=1===h.a.globalData.auth.currentStage&&this.userNamePasswordStage;this.data.showForgotPassword=e&&"true"===h.a.globalData.forgotPassword,this.data.showForgotUserName=e&&"true"===h.a.globalData.forgotUsername,this.data.showForgotten=this.data.showForgotPassword||this.data.showForgotUserName,this.data.showSelfRegistration=e&&"true"===h.a.globalData.selfRegistration,this.data.showRememberLogin=e,this.data.showSocialLogin=e&&!h.a.loggedUser&&!i.a.isEmpty(h.a.globalData.socialImplementations)}).call(o),o.parentRender(function(){o.prefillLoginData(),l.resolve()})};this.loadThemedTemplate("openam/authn/".concat(e.stage)).then(function(e){o.template=e,b()},function(){o.template="openam/RESTLoginTemplate",b()})}return l},prefillLoginData:function(){var e=this,a=k.a.getCookie("login");0!==this.$el.find("[name=loginRemember]").length&&a?(this.$el.find("input[type=text]:first").val(a),this.$el.find("[name=loginRemember]").attr("checked","true"),setTimeout(function(){e.$el.find("[type=password]").focus()})):this.$el.find(":input:not([type='radio']):not([type='checkbox']):not([type='submit']):not([type='button']):first").focus()},handleParams:function(){var e,a,t=E.a.getCurrentCompositeQueryString(),n=Object(m.b)(t);if(!n.authIndexType||"composite_advice"!==n.authIndexType){var l=i.a.find(n,function(e,a){return"resourceurl"===a.toLowerCase()});i.a.each(["authlevel","module","service","user","resource"],function(e){if(n[e]){if("resource"===e&&!l)return;var a="resource"===e?l:n[e];n.authIndexType="authlevel"===e?"level":e,n.authIndexValue=a,h.a.globalData.auth.additional+="&authIndexType=".concat("authlevel"===e?"level":e,"&authIndexValue=").concat(a)}})}return(e=n.goto)&&(a=decodeURIComponent(e)),e&&(i.a.startsWith(a,"/SSORedirect")||i.a.startsWith(a,"/SSOPOST"))&&(n.goto="".concat(v.a.context).concat(n.goto),h.a.globalData.auth.additional.replace("&goto=","&goto=".concat(v.a.context))),h.a.globalData.auth.urlParams=n,n}});u.a.registerHelper("callbackRender",function(){var e,a,t,n=this,l="",r="",o="",s=((t=this.output.find(function(e){return"failedPolicies"===e.name}))?t.value.map(JSON.parse):[]).map(function(e){return p.a.t("common.policyValidationMessages.".concat(e.policyRequirement),F({},e.params,{interpolation:{escapeValue:!1}}))});function c(e){return i.a.isEmpty(e)?"":i.a.camelCase(e)}i.a.find(this.output,function(e){"prompt"===e.name&&void 0!==e.value&&e.value.length&&(r=e.value.replace(/:$/,""))});var g={id:c(this.input.name),index:this.input.index,value:this.input.value,prompt:r};function m(e,a){return i.a.find(u.a.partials,function(a,t){return-1!==t.indexOf("login/_".concat(e))})(i.a.merge(g,a))}switch(this.type){case"PasswordCallback":case"ValidatedCreatePasswordCallback":l+=m("Default",{type:"password",errorMessages:s});break;case"TextInputCallback":l+=m("TextInput");break;case"SuspendedTextOutputCallback":case"TextOutputCallback":"4"===(e={message:i.a.find(this.output,{name:"message"}),type:i.a.find(this.output,{name:"messageType"})}).type.value?l+=m("ScriptTextOutput",{messageValue:e.message.value}):l+=m("TextOutput",{typeValue:e.type.value,messageValue:e.message.value});break;case"ConfirmationCallback":(e=i.a.find(this.output,{name:"options"}))&&void 0!==e.value&&(a=e.value.length>1?i.a.find(this.output,{name:"defaultOption"}):{value:0},i.a.each(e.value,function(e,t){o=a&&a.value===t?"btn-primary":"btn-default",l+=m("Confirmation",{btnClass:o,key:t,option:e})}));break;case"ChoiceCallback":(e=i.a.find(this.output,{name:"choices"}))&&void 0!==e.value&&(l+=m("Choice",{values:i.a.map(e.value,function(e,a){return{active:n.input.value===a,key:a,value:e}})}));break;case"HiddenValueCallback":l+=m("HiddenValue");break;case"RedirectCallback":l+=m("Redirect");break;case"PollingWaitCallback":l+=m("PollingWait",{message:i.a.find(this.output,{name:"message"}).value});break;case"ReCaptchaCallback":l+=m("ReCaptcha",{siteKey:i.a.find(this.output,{name:"recaptchaSiteKey"}).value,apiUri:i.a.find(this.output,{name:"captchaApiUri"}).value,divClass:i.a.find(this.output,{name:"captchaDivClass"}).value});break;case"BooleanAttributeInputCallback":l+=m("Checkbox",{errorMessages:s});break;case"NumberAttributeInputCallback":l+=m("Default",{errorMessages:s,type:"number"});break;case"KbaCreateCallback":(e=i.a.find(this.output,{name:"predefinedQuestions"}))&&void 0!==e.value&&(l+=m("Kba",{values:i.a.map(e.value,function(e,a){return{active:n.input.value===a,key:a,value:e}}),questionId:c(this.input[0].name),question:this.input[0],answerId:c(this.input[1].name),answer:this.input[1]}));break;case"ConsentMappingCallback":l+=this.output.isLast?m("ConsentMapping",{allConsentMappingOutputs:i.a.map(this.output.allConsentMappingOutputs,function(e){return{displayName:i.a.find(e,{name:"displayName"}).value,icon:i.a.find(e,{name:"icon"}).value||U.a,consentMessage:i.a.find(e,{name:"message"}).value,isLast:e.isLast,index:e.index}})}):"";break;case"TermsAndConditionsCallback":l+=m("TermsAndConditions",{termsAndConditionsText:i.a.find(this.output,{name:"terms"}).value});break;case"SelectIdPCallback":l+=m("SelectIdp",{providers:i.a.find(this.output,{name:"providers"}).value,onlyCallback:this.onlyCallback});break;case"DeviceProfileCallback":var f="callback_".concat(this.input.index),b=i.a.find(this.output,{name:"onlyCallback"}).value,h=i.a.find(this.output,{name:"message"}).value;if(l+=m("DeviceProfile",{message:h,onlyCallback:b,id:f}),!b)(new d.a).getProfile({location:i.a.find(this.output,{name:"location"}).value,metadata:i.a.find(this.output,{name:"metadata"}).value}).then(function(e){document.querySelector("#".concat(f,"_input")).value=JSON.stringify(e),h&&(document.querySelector("#".concat(f,"_spinner")).classList.add("display-none"),document.querySelector("#".concat(f,"_check")).classList.remove("display-none"))}).catch(function(){document.querySelector("#".concat(f,"_input")).value="",h&&(document.querySelector("#".concat(f,"_spinner")).classList.add("display-none"),document.querySelector("#".concat(f,"_check")).classList.remove("display-none"))});break;default:l+=m("Default",{errorMessages:s,type:"text"})}return new u.a.SafeString(l)});a.default=new M}}]);
//# sourceMappingURL=7.b502fc1438.js.map