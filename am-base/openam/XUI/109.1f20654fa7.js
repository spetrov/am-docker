(window.webpackJsonp=window.webpackJsonp||[]).push([[109,50,51],{285:function(e,t,n){var r=n(5);e.exports=(r.default||r).template({1:function(e,t,n,r,a){return"alert-warning"},3:function(e,t,n,r,a){return"alert-info"},5:function(e,t,n,r,a){return"text-muted"},7:function(e,t,n,r,a){return"disabled"},9:function(e,t,n,r,a){return" checked "},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,a){var o,i,c=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="clearfix">\n    <div class="alert '+(null!=(o=l(n,"if").call(c,null!=t?l(t,"isReadOnly"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a,loc:{start:{line:9,column:22},end:{line:9,column:78}}}))?o:"")+'" role="alert">\n        '+(null!=(o="function"==typeof(i=null!=(i=l(n,"description")||(null!=t?l(t,"description"):t))?i:s)?i.call(c,{name:"description",hash:{},data:a,loc:{start:{line:10,column:8},end:{line:10,column:25}}}):i)?o:"")+'\n    </div>\n\n<div class="form-horizontal">\n    <div class="form-group clearfix">\n        <label class="control-label col-sm-8 '+(null!=(o=l(n,"if").call(c,null!=t?l(t,"isReadOnly"):t,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a,loc:{start:{line:15,column:45},end:{line:15,column:80}}}))?o:"")+'" for="multiFactorAuth">'+e.escapeExpression("function"==typeof(i=null!=(i=l(n,"label")||(null!=t?l(t,"label"):t))?i:s)?i.call(c,{name:"label",hash:{},data:a,loc:{start:{line:15,column:104},end:{line:15,column:113}}}):i)+'</label>\n        <div class="col-sm-4">\n            <div class="control-group">\n                <label class="am-toggle-switch">\n                    <input '+(null!=(o=l(n,"if").call(c,null!=t?l(t,"isReadOnly"):t,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a,loc:{start:{line:19,column:27},end:{line:19,column:60}}}))?o:"")+' id="multiFactorAuth" '+(null!=(o=l(n,"if").call(c,null!=t?l(t,"isChecked"):t,{name:"if",hash:{},fn:e.program(9,a,0),inverse:e.noop,data:a,loc:{start:{line:19,column:82},end:{line:19,column:115}}}))?o:"")+' type="checkbox" />\n                    <span />\n                </label>\n            </div>\n        </div>\n    </div>\n</div>\n'},useData:!0})},286:function(e,t,n){var r=n(5);e.exports=(r.default||r).template({1:function(e,t,n,r,a){var o,i,c=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="alert alert-warning" role="alert">\n    <p>'+(null!=(o="function"==typeof(i=null!=(i=u(n,"description")||(null!=t?u(t,"description"):t))?i:s)?i.call(c,{name:"description",hash:{},data:a,loc:{start:{line:10,column:7},end:{line:10,column:24}}}):i)?o:"")+'</p>\n</div>\n<div class="form-group">\n    <label class="text-muted" for="deviceName">'+l((u(n,"t")||t&&u(t,"t")||s).call(c,"openam.authDevices.editDeviceDialog.deviceName",{name:"t",hash:{},data:a,loc:{start:{line:13,column:47},end:{line:13,column:101}}}))+'</label>\n    <input disabled type="text" value="'+l(e.lambda(null!=(o=null!=t?u(t,"device"):t)?u(o,"deviceName"):o,t))+'" class="form-control" id="deviceName" placeholder="'+l((u(n,"t")||t&&u(t,"t")||s).call(c,"openam.authDevices.editDeviceDialog.deviceName",{name:"t",hash:{},data:a,loc:{start:{line:14,column:112},end:{line:14,column:167}}}))+'" />\n</div>\n'},3:function(e,t,n,r,a){var o,i=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="form-group">\n    <label for="deviceName">'+s((l(n,"t")||t&&l(t,"t")||c).call(i,"openam.authDevices.editDeviceDialog.deviceName",{name:"t",hash:{},data:a,loc:{start:{line:18,column:28},end:{line:18,column:82}}}))+'</label>\n    <input type="text" value="'+s(e.lambda(null!=(o=null!=t?l(t,"device"):t)?l(o,"deviceName"):o,t))+'" class="form-control" id="deviceName" placeholder="'+s((l(n,"t")||t&&l(t,"t")||c).call(i,"openam.authDevices.editDeviceDialog.deviceName",{name:"t",hash:{},data:a,loc:{start:{line:19,column:103},end:{line:19,column:158}}}))+'" />\n</div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,a){var o,i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(o=i(n,"if").call(null!=t?t:e.nullContext||{},null!=(o=null!=t?i(t,"device"):t)?i(o,"isReadOnly"):o,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a,loc:{start:{line:8,column:0},end:{line:21,column:7}}}))?o:""},useData:!0})},555:function(e,t,n){var r={"./af":421,"./af.js":421,"./ar":422,"./ar-dz":423,"./ar-dz.js":423,"./ar-kw":424,"./ar-kw.js":424,"./ar-ly":425,"./ar-ly.js":425,"./ar-ma":426,"./ar-ma.js":426,"./ar-sa":427,"./ar-sa.js":427,"./ar-tn":428,"./ar-tn.js":428,"./ar.js":422,"./az":429,"./az.js":429,"./be":430,"./be.js":430,"./bg":431,"./bg.js":431,"./bm":432,"./bm.js":432,"./bn":433,"./bn.js":433,"./bo":434,"./bo.js":434,"./br":435,"./br.js":435,"./bs":436,"./bs.js":436,"./ca":437,"./ca.js":437,"./cs":438,"./cs.js":438,"./cv":439,"./cv.js":439,"./cy":440,"./cy.js":440,"./da":441,"./da.js":441,"./de":442,"./de-at":443,"./de-at.js":443,"./de-ch":444,"./de-ch.js":444,"./de.js":442,"./dv":445,"./dv.js":445,"./el":446,"./el.js":446,"./en-SG":447,"./en-SG.js":447,"./en-au":448,"./en-au.js":448,"./en-ca":449,"./en-ca.js":449,"./en-gb":450,"./en-gb.js":450,"./en-ie":451,"./en-ie.js":451,"./en-il":452,"./en-il.js":452,"./en-nz":453,"./en-nz.js":453,"./eo":454,"./eo.js":454,"./es":455,"./es-do":456,"./es-do.js":456,"./es-us":457,"./es-us.js":457,"./es.js":455,"./et":458,"./et.js":458,"./eu":459,"./eu.js":459,"./fa":460,"./fa.js":460,"./fi":461,"./fi.js":461,"./fo":462,"./fo.js":462,"./fr":463,"./fr-ca":464,"./fr-ca.js":464,"./fr-ch":465,"./fr-ch.js":465,"./fr.js":463,"./fy":466,"./fy.js":466,"./ga":467,"./ga.js":467,"./gd":468,"./gd.js":468,"./gl":469,"./gl.js":469,"./gom-latn":470,"./gom-latn.js":470,"./gu":471,"./gu.js":471,"./he":472,"./he.js":472,"./hi":473,"./hi.js":473,"./hr":474,"./hr.js":474,"./hu":475,"./hu.js":475,"./hy-am":476,"./hy-am.js":476,"./id":477,"./id.js":477,"./is":478,"./is.js":478,"./it":479,"./it-ch":480,"./it-ch.js":480,"./it.js":479,"./ja":481,"./ja.js":481,"./jv":482,"./jv.js":482,"./ka":483,"./ka.js":483,"./kk":484,"./kk.js":484,"./km":485,"./km.js":485,"./kn":486,"./kn.js":486,"./ko":487,"./ko.js":487,"./ku":488,"./ku.js":488,"./ky":489,"./ky.js":489,"./lb":490,"./lb.js":490,"./lo":491,"./lo.js":491,"./lt":492,"./lt.js":492,"./lv":493,"./lv.js":493,"./me":494,"./me.js":494,"./mi":495,"./mi.js":495,"./mk":496,"./mk.js":496,"./ml":497,"./ml.js":497,"./mn":498,"./mn.js":498,"./mr":499,"./mr.js":499,"./ms":500,"./ms-my":501,"./ms-my.js":501,"./ms.js":500,"./mt":502,"./mt.js":502,"./my":503,"./my.js":503,"./nb":504,"./nb.js":504,"./ne":505,"./ne.js":505,"./nl":506,"./nl-be":507,"./nl-be.js":507,"./nl.js":506,"./nn":508,"./nn.js":508,"./pa-in":509,"./pa-in.js":509,"./pl":510,"./pl.js":510,"./pt":511,"./pt-br":512,"./pt-br.js":512,"./pt.js":511,"./ro":513,"./ro.js":513,"./ru":514,"./ru.js":514,"./sd":515,"./sd.js":515,"./se":516,"./se.js":516,"./si":517,"./si.js":517,"./sk":518,"./sk.js":518,"./sl":519,"./sl.js":519,"./sq":520,"./sq.js":520,"./sr":521,"./sr-cyrl":522,"./sr-cyrl.js":522,"./sr.js":521,"./ss":523,"./ss.js":523,"./sv":524,"./sv.js":524,"./sw":525,"./sw.js":525,"./ta":526,"./ta.js":526,"./te":527,"./te.js":527,"./tet":528,"./tet.js":528,"./tg":529,"./tg.js":529,"./th":530,"./th.js":530,"./tl-ph":531,"./tl-ph.js":531,"./tlh":532,"./tlh.js":532,"./tr":533,"./tr.js":533,"./tzl":534,"./tzl.js":534,"./tzm":535,"./tzm-latn":536,"./tzm-latn.js":536,"./tzm.js":535,"./ug-cn":537,"./ug-cn.js":537,"./uk":538,"./uk.js":538,"./ur":539,"./ur.js":539,"./uz":540,"./uz-latn":541,"./uz-latn.js":541,"./uz.js":540,"./vi":542,"./vi.js":542,"./x-pseudo":543,"./x-pseudo.js":543,"./yo":544,"./yo.js":544,"./zh-cn":545,"./zh-cn.js":545,"./zh-hk":546,"./zh-hk.js":546,"./zh-tw":547,"./zh-tw.js":547};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=555},658:function(e,t,n){"use strict";n.r(t);n(46),n(65),n(66),n(45),n(389),n(390),n(19),n(62),n(51);var r=n(86),a=(n(29),n(83),n(89),n(174),n(35),n(123),n(124),n(125),n(36),n(47),n(112),n(2)),o=n.n(a),i=n(0),c=n.n(i),s=n(16),l=n(567),u=n(4),d=n(17),p=n(70),f=function(e){return e.catch(function(e){throw e instanceof l.CRESTError?401===e.status?d.a.sendEvent(u.a.EVENT_SHOW_LOGIN_DIALOG):p.a.addMessage({message:e.message,type:p.a.TYPE_DANGER}):e instanceof l.RequestError?p.a.addMessage({message:Object(s.b)("config.messages.api.requestError"),type:p.a.TYPE_DANGER}):e instanceof l.ParseError&&p.a.addMessage({message:Object(s.b)("config.messages.api.parseError"),type:p.a.TYPE_DANGER}),e})},m=(n(627),n(281)),h=function(e){return m.a.showSpinner(),e.finally(function(){m.a.hideSpinner()})},v=n(116),b=function(e,t){return"".concat(u.a.context,"/json").concat(Object(v.a)(e,{realm:t}))},j=function(e){return new l.CRESTv2(b("/users/".concat(encodeURIComponent(e),"/devices/2fa/push")),{middleware:[f]})},y=function(e){return h(j(e).action("check")).then(function(e){return!e.result})},g=function(e,t){return h(j(e).action("skip",{body:{value:!t}}))},D=function(e,t){return h(j(e).delete(t))},O=function(e){return j(e).queryFilter()},w=function(e){return new l.CRESTv2(b("/users/".concat(encodeURIComponent(e),"/devices/2fa/webauthn")),{middleware:[f]})},k=function(e,t){return h(w(e).delete(t))},A=function(e){return w(e).queryFilter()},T=function(e){return new l.CRESTv2(b("/users/".concat(encodeURIComponent(e),"/devices/2fa/oath")),{middleware:[f]})},C=function(e){return h(T(e).action("check")).then(function(e){return!e.result})},E=function(e,t){return h(T(e).action("skip",{body:{value:!t}}))},P=function(e,t){return h(T(e).delete(t))},S=function(e){return T(e).queryFilter()},x=n(3),R=n(366),_=n(286),N=n.n(_),U=function(e,t){var n=e.isReadOnly?s.a.t("openam.authDevices.common.noAuth",{deviceName:e.deviceName}):"",r=N()({device:e,description:n}),a=e.isReadOnly?"btn-primary disabled":"btn-primary",i=x.a.loggedUser.get("username");R.a.show({title:s.a.t("openam.authDevices.editDeviceDialog.title"),message:o()(r),buttons:[{id:"modalCancelBtn",label:s.a.t("common.form.cancel"),action:function(e){e.close()}},{label:s.a.t("common.form.save"),cssClass:a,disabled:e.isReadOnly,action:function(n){var r=this,a=n.$modalBody.find("#deviceName"),o=n.getButton("modalCancelBtn");o.disable(),this.disable(),a.prop("disabled",!0),n.setClosable(!1),function(e,t,n){return h(w(e).update(t,n))}(i,e.deviceUuid,{deviceName:a.val()}).then(function(){n.close(),t(),p.a.addMessage({message:s.a.t("config.messages.CommonMessages.changesSaved")})},function(){o.enable(),r.enable(),a.prop("disabled",!1),n.setClosable(!0)})}}]})},z=n(285),I=n.n(z),F=function(e,t,n){return e?t?n.noAuth:n.noDevice:n.auth},M=function(e,t,n,r,a){var i=t?"btn-primary disabled":"btn-primary";R.a.show({buttons:[{id:"modalCancelBtn",action:function(e){e.close()},label:s.a.t("common.form.cancel")},{action:function(e){var t=this,n=e.$modalBody.find("#multiFactorAuth"),o=e.getButton("modalCancelBtn");o.disable(),this.disable(),n.prop("disabled",!0),e.setClosable(!1);var i=n.is(":checked");a(r,i).then(function(){e.close(),p.a.addMessage({message:s.a.t("config.messages.CommonMessages.changesSaved")})},function(){o.enable(),t.enable(),n.prop("disabled",!1),e.setClosable(!0)})},cssClass:i,disabled:t,label:s.a.t("common.form.save")}],cssClass:"devices-settings",message:o()(e),title:n})};function B(e){var t=e.isChecked,n=e.isReadOnly,r=e.title,a=e.label,o=e.descriptions,i=e.deviceUuid,c=e.save,s=x.a.loggedUser.get("username");t(s).then(function(e){var t=F(n,i,o),l=I()({isChecked:e,isReadOnly:n,label:a,description:t});M(l,n,r,s,c)})}function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach(function(t){Y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Q=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=H(this,W(t).call(this))).template="user/dashboard/authenticationDevices/AuthenticationDevicesTemplate",e.noBaseTemplate=!0,e.element="#authenticationDevices",e.events={"click [data-delete]":"handleDelete","click [data-edit]":"handleEdit"},e}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,r["a"]),n=t,(a=[{key:"handleDelete",value:function(e){var t=this;e.preventDefault();var n,r=o()(e.currentTarget).data(),a=r.deviceType,i=r.deviceUuid;switch(a){case"oath":n=P;break;case"push":n=D;break;case"webauthn":n=k}n(x.a.loggedUser.get("username"),i).then(function(){t.render()})}},{key:"handleEdit",value:function(e){var t=this;e.preventDefault();var n=o()(e.currentTarget).data(),r=n.deviceType,a=n.deviceManagementStatus,i=n.deviceName,c=n.deviceUuid;switch(r){case"oath":B({deviceUuid:c,isChecked:C,isReadOnly:!a,save:E,title:s.a.t("openam.authDevices.multiFactorAuthDialog.oath.title"),label:s.a.t("openam.authDevices.multiFactorAuthDialog.oath.label"),descriptions:{auth:s.a.t("openam.authDevices.multiFactorAuthDialog.oath.description.auth"),noAuth:s.a.t("openam.authDevices.common.noAuth",{deviceName:i}),noDevice:s.a.t("openam.authDevices.multiFactorAuthDialog.oath.description.noDevice")}});break;case"push":B({deviceUuid:c,isChecked:y,isReadOnly:!a,save:g,title:s.a.t("openam.authDevices.multiFactorAuthDialog.push.title"),label:s.a.t("openam.authDevices.multiFactorAuthDialog.push.label"),descriptions:{auth:s.a.t("openam.authDevices.multiFactorAuthDialog.push.description.auth"),noAuth:s.a.t("openam.authDevices.common.noAuth",{deviceName:i}),noDevice:s.a.t("openam.authDevices.multiFactorAuthDialog.push.description.noDevice")}});break;case"webauthn":U({deviceName:i,deviceUuid:c,isReadOnly:!a},function(){t.render()})}}},{key:"render",value:function(){var e=this,t=x.a.loggedUser.get("username");Promise.all([S(t),O(t),A(t)]).then(function(t){var n=$(t,3),r=n[0],a=n[1],o=n[2],i=G({icon:"clock-o",type:"oath",title:s.a.t("openam.authDevices.cards.oath"),deviceName:s.a.t("openam.authDevices.cards.noDevice")},c.a.get(r,"result[0]",{})),l=G({icon:"shield",type:"push",title:s.a.t("openam.authDevices.cards.push"),deviceName:s.a.t("openam.authDevices.cards.noDevice")},c.a.get(a,"result[0]",{})),u=V(c.a.map(o.result,function(e){return G({icon:"shield",type:"webauthn",title:e.deviceName},e)}));e.data.devices=[i,l].concat(V(u)),e.parentRender(function(){e.$el.find('[data-toggle="popover"]').popover()})})}}])&&J(n.prototype,a),i&&J(n,i),t}()),X=n(180),Z=new X.a("".concat(u.a.host).concat(u.a.context,"/json"));function ee(e){return c.a.map(c.a.sortBy(c.a.keys(e),function(e){return e}),function(t){var n={id:t};return c.a.each(e[t],function(e,t){n[t]=e[0]}),n})}Z.getMyApplications=function(){return Z.serviceCall({url:Object(v.a)("/dashboard/assigned"),headers:{"Cache-Control":"no-cache","Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(ee)},Z.getAvailableApplications=function(){return Z.serviceCall({url:Object(v.a)("/dashboard/available"),headers:{"Cache-Control":"no-cache","Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(ee)};var te=Z,ne=new(r.a.extend({template:"user/dashboard/applications/MyApplicationsTemplate",noBaseTemplate:!0,element:"#myApplicationsSection",render:function(){var e=this;te.getMyApplications().then(function(t){t.length>0&&(e.data.apps=t),e.parentRender()})}})),re=(n(90),n(179),new X.a("".concat(u.a.host).concat(u.a.context,"/json")));re.getApplications=function(){return re.serviceCall({url:Object(v.a)("/users/".concat(encodeURIComponent(x.a.loggedUser.get("username")),"/oauth2/applications?_queryFilter=true")),headers:{"Cache-Control":"no-cache","Accept-API-Version":"protocol=1.0,resource=1.1"}})},re.revokeApplication=function(e){return re.serviceCall({url:Object(v.a)("/users/".concat(encodeURIComponent(x.a.loggedUser.get("username")),"/oauth2/applications/").concat(e)),type:"DELETE",headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};var ae=re,oe=new(r.a.extend({template:"user/dashboard/oAuthTokens/TokensTemplate",noBaseTemplate:!0,element:"#myOAuthTokensSection",events:{"click a.deleteToken":"deleteToken"},render:function(){var e=this;ae.getApplications().then(function(t){e.data.applications=c.a.map(t.result,function(e){return{id:e._id,name:e.name||e._id,logoUri:e.logoUri,scopes:c.a.values(e.scopes).join(", "),expiryDateTime:e.expiryDateTime?new Date(e.expiryDateTime).toLocaleString():o.a.t("openam.oAuth2.tokens.neverExpires")}}),e.parentRender(function(){e.$el.find('[data-toggle="tooltip"]').tooltip()})})},deleteToken:function(e){e.preventDefault();var t=this;ae.revokeApplication(e.currentTarget.id).then(function(){t.render()},function(){console.error("Failed to revoke application")})}})),ie=(n(575),n(69),n(392),new X.a("".concat(u.a.host).concat(u.a.context,"/json")));ie.getTrustedDevices=function(){return ie.serviceCall({url:Object(v.a)("/users/".concat(x.a.loggedUser.get("username"),"/devices/trusted/?_queryId=*")),headers:{"Cache-Control":"no-cache","Accept-API-Version":"protocol=1.0,resource=1.0"}})},ie.deleteTrustedDevice=function(e){return ie.serviceCall({url:Object(v.a)("/users/".concat(x.a.loggedUser.get("username"),"/devices/trusted/").concat(e)),type:"DELETE",headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};var ce=ie,se=new X.a("".concat(u.a.host).concat(u.a.context,"/json"));se.getTrustedDeviceProfiles=function(){return se.serviceCall({url:Object(v.a)("/users/".concat(x.a.loggedUser.get("username"),"/devices/profile/?_queryId=*")),headers:{"Cache-Control":"no-cache","Accept-API-Version":"protocol=1.0,resource=1.0"}})},se.deleteTrustedDeviceProfile=function(e){return se.serviceCall({url:Object(v.a)("/users/".concat(x.a.loggedUser.get("username"),"/devices/profile/").concat(e)),type:"DELETE",headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})};var le=se,ue=n(417),de=n.n(ue),pe=n(628),fe=n.n(pe);function me(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ve=new(r.a.extend({template:"user/dashboard/trustedDevices/TrustedDevicesTemplate",noBaseTemplate:!0,element:"#myTrustedDevicesSection",events:{"click  a.deleteDevice":"deleteDevice"},render:function(){var e=this;Promise.all([ce.getTrustedDevices(),le.getTrustedDeviceProfiles()]).then(function(t){var n=he(t,2),r=n[0],a=n[1],o=e.formatDevices([].concat(me(r.result),me(a.result)));e.data.legacyOnly=0===a.result.length,e.data.devices=e.sortDevicesByDate(o),e.parentRender(function(){e.$el.find('[data-toggle="tooltip"]').tooltip()})})},sortDevicesByDate:function(e){return e.sort(function(e,t){return de()(t.lastSelectedDate).unix()-de()(e.lastSelectedDate).unix()})},formatDevices:function(e){return e.forEach(function(e){if(e.metadata){var t=Object(i.get)(e,"metadata.browser.userAgent",""),n=t?fe()(t):{browser:{},os:{}},r=n.browser,a=n.os,o=localStorage.getItem("profile-id");e.name=e.alias,e.cpu="".concat(Object(i.get)(e,"metadata.platform.platform","")),e.os="".concat(Object(i.get)(a,"name","")," ").concat(Object(i.get)(a,"version","")).trim(),e.browser="".concat(Object(i.get)(r,"name","")," ").concat(Object(i.get)(r,"version","")).trim(),e.deviceType=Object(i.get)(a,"name","").replace(/ /g,"").toLowerCase(),e.isCurrent=e.identifier===o}e.lastSelectedDate=de()(e.lastSelectedDate).format("D MMM YYYY, h:mm")}),e},deleteDevice:function(e){e.preventDefault();var t=this,n=e.currentTarget.getAttribute("data-id"),r=e.currentTarget.getAttribute("data-identifier");n?ce.deleteTrustedDevice(n).then(function(){console.log("Deleted trusted device"),t.render()},function(){console.error("Failed to delete trusted device")}):le.deleteTrustedDeviceProfile(r).then(function(){console.log("Deleted trusted device profile"),t.render()},function(){console.error("Failed to delete trusted device profile")})}}));function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Oe=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ye(this,ge(t).call(this))).template="user/dashboard/DashboardTemplate",e}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(t,r["a"]),n=t,(a=[{key:"render",value:function(){this.parentRender(function(){ne.render(),ve.render(),oe.render(),Q.render()})}}])&&je(n.prototype,a),o&&je(n,o),t}();t.default=new Oe}}]);
//# sourceMappingURL=109.1f20654fa7.js.map