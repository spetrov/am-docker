(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{551:function(e,t,n){"use strict";n(29),n(89);var a=n(0),r=n.n(a),o=n(180),s=n(3),i=n(4),c=n(116),l=new o.a("".concat(i.a.host).concat(i.a.context,"/json"));l.getUmaConfig=function(){return l.serviceCall({url:Object(c.a)("/serverinfo/uma"),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(function(e){return s.a.globalData.auth.uma=s.a.globalData.auth.uma||{},s.a.globalData.auth.uma.enabled=e.enabled,s.a.globalData.auth.uma.resharingMode=e.resharingMode,e})},l.unshareAllResources=function(){var e=encodeURIComponent(s.a.loggedUser.get("username"));return l.serviceCall({url:Object(c.a)("/users/".concat(e,"/oauth2/resources/sets?_action=revokeAll")),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"})},l.approveRequest=function(e,t){return l.serviceCall({url:Object(c.a)("/users/".concat(encodeURIComponent(s.a.loggedUser.get("username")),"/uma/pendingrequests/").concat(e,"?_action=approve")),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST",data:JSON.stringify({scopes:t})})},l.denyRequest=function(e){return l.serviceCall({url:Object(c.a)("/users/".concat(encodeURIComponent(s.a.loggedUser.get("username")),"/uma/pendingrequests/").concat(e,"?_action=deny")),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"})},l.labels={all:function(){return l.serviceCall({url:Object(c.a)("/users/".concat(encodeURIComponent(s.a.loggedUser.get("username")),"/oauth2/resources/labels?_queryFilter=true")),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})},create:function(e,t){return l.serviceCall({url:Object(c.a)("/users/".concat(encodeURIComponent(s.a.loggedUser.get("username")),"/oauth2/resources/labels?_action=create")),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST",data:JSON.stringify({name:e,type:t})})},get:function(e){return l.serviceCall({url:Object(c.a)("/users/".concat(encodeURIComponent(s.a.loggedUser.get("username")),"/oauth2/resources/labels?_queryFilter=true")),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(function(t){return r.a.find(t.result,{_id:e})})},remove:function(e){return l.serviceCall({url:Object(c.a)("/users/".concat(encodeURIComponent(s.a.loggedUser.get("username")),"/oauth2/resources/labels/").concat(encodeURIComponent(e))),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"DELETE"})}},t.a=l},586:function(e,t,n){"use strict";n.r(t);n(83),n(89),n(84),n(90),n(179),n(63);var a=n(0),r=n.n(a),o=n(2),s=n.n(o),i=n(20),c=(n(173),n(562)),l=n.n(c),u=n(566),d=n.n(u),p=n(86),h=n(53),f=n(28),g=p.a.extend({events:{"click .sidenav a[href]:not([data-toggle]):not([data-event])":"navigateToPage"},findContentElement:function(){return this.$el.find("#sidePageContent")[0]},findActiveNavItem:function(e){var t=this.$el.find('.sidenav ol > li > a[href^="#'.concat(e,'"]'));if(t.length){var n=t.parent();n.addClass("active"),n.parentsUntil(this.$el.find(".sidenav"),"ol.collapse").addClass("in").attr("aria-expanded","true").parent().addClass("active")}else{var a=e.split("/");this.findActiveNavItem(a.slice(0,-1).join("/"))}},navigateToPage:function(){this.renderSidePageContentOnly=!0},setElement:function(e){var t=this;p.a.prototype.setElement.call(this,e),this.route&&this.renderSidePageContentOnly&&this.route.page().then(r.a.bind(function(e){t.renderPage(e,t.args)},this),r.a.bind(function(){throw"Unable to render page for module ".concat(t.route.page)},this))},render:function(e,t){var n=this;this.args=e;var a=this.findContentElement();a&&d.a.unmountComponentAtNode(a);var r=function(){n.$el.find(".sidenav li").removeClass("active"),n.findActiveNavItem(f.a.getCurrentFragment()),n.route.page().then(h.a).then(function(t){n.renderPage(t,e)}),t&&t()};this.renderSidePageContentOnly?r():this.parentRender(function(){r()})},renderPage:function(e,t,n){if(e.prototype instanceof p.a){var a=new e;a.element="#sidePageContent",a.render(t,n),this.delegateEvents()}else{if(!function(e){return e.prototype instanceof l.a.Component||e.WrappedComponent||r.a.isFunction(e)}(e))throw new Error("[TreeNavigation] Unable to determine page type (Backbone or React).");d.a.render(l.a.createElement(e),this.findContentElement())}this.renderSidePageContentOnly=!1}}),v=n(551),m=g.extend({template:"user/uma/views/resource/LabelTreeNavigationTemplate",partials:{"uma/_NestedList":"uma/_NestedList"},findActiveNavItem:function(e){var t=i.a.configuration.routes.umaResourcesMyLabelsResource,n=i.a.currentRoute===t?r.a.initial(e.split("/")).join("/"):e,a=this.$el.find(".sidenav ol > li > a[href='#".concat(n,"']"));a.length&&(this.$el.find(".sidenav ol").removeClass("in"),a.parentsUntil(this.$el.find(".sidenav"),"ol.collapse").addClass("in").parent().children("span[data-toggle]").attr("aria-expanded","true"),a.parent().addClass("active"),"false"===a.attr("aria-expanded")&&a.attr("aria-expanded","true"))},navigateToPage:function(e){this.$el.find(".sidenav li").removeClass("active"),s()(e.currentTarget).addClass("active"),this.renderSidePageContentOnly=!0},render:function(e,t){var n,a,o=this;this.args=e,this.callback=t,v.a.labels.all().then(function(s){r.a.some(s.result,function(e){return"starred"===e.name.toLowerCase()})||v.a.labels.create("starred","STAR"),n=r.a.filter(s.result,function(e){return"user"===e.type.toLowerCase()}),a=r.a.sortBy(n,function(e){return e.name}),o.data.labels={starred:r.a.filter(s.result,function(e){return"starred"===e.type.toLowerCase()}),system:r.a.filter(s.result,function(e){return"system"===e.type.toLowerCase()}),user:a},o.data.nestedLabels=[],r.a.each(o.data.labels.user,function(e){o.addToParent(o.data.nestedLabels,e)}),g.prototype.render.call(o,e,t)})},addToParent:function(e,t){if(-1===t.name.indexOf("/"))t.title=t.name,t.children=[],t.viewId=r.a.uniqueId("viewId_"),e.push(t);else{var n,a=t.name.split("/"),o=a.shift();t.name=a.join("/"),(n=r.a.find(e,{title:o}))||(n={title:o,children:[],viewId:r.a.uniqueId("viewId_")},e.push(n)),this.addToParent(n.children,t)}},addUserLabels:function(e){var t=this;this.data.nestedLabels=[],this.data.labels.user=r.a.sortBy(e,function(e){return e.name}),r.a.each(this.data.labels.user,function(e){t.addToParent(t.data.nestedLabels,e)}),this.renderSidePageContentOnly=!0,g.prototype.render.call(this,this.args,this.callback)}});t.default=new m}}]);
//# sourceMappingURL=5.cd46a4ae0e.js.map