(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{1400:function(e,t,n){"use strict";n(50),n(144);var r=n(2),a=n.n(r),o=n(1),c=n.n(o),s=n(41),i=n(88);t.a=function(e){var t=function(t){var n=s.a.currentRoute,r=s.a.extractParameters(n,i.a.getCurrentFragment()),o=s.a.applyDefaultParameters(n,r),l={params:a.a.map(o,function(e){return e?decodeURIComponent(e):""})};return c.a.createElement(e,a.a.extend({},t,{router:l}))};return t.displayName="withRouter(".concat(function(e){return e.displayName||e.name||"Component"}(e),")"),t.WrappedComponent=e,t}},1401:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=a.a.shape({params:a.a.array.isRequired});t.a=o},1404:function(e,t,n){"use strict";n(159);t.a=function(e){return e?"&_fields=".concat(e.join(",")):""}},1405:function(e,t,n){"use strict";n(31);t.a=function(e){if(e){var t=e.sizePerPage,n=e.pagedResultsOffset,r=e.sortKey,a=e.sortDirection,o=n?"&_pagedResultsOffset=".concat(n):"",c="&_pageSize=".concat(t),s=r&&a?"&_sortKeys=".concat(encodeURIComponent(a)).concat(r):"";return"".concat(o).concat(c).concat(s)}return""}},1406:function(e,t,n){"use strict";var r=n(2),a=n(0),o=n.n(a),c=n(1),s=n.n(c),i=function(e){var t=e.children,n=e.icon,a=e.title,o=e.subtitle,c=o?"deep":"shallow",i=n?s.a.createElement("span",{className:"header-icon pull-left bg-primary"},s.a.createElement("i",{className:"fa fa-".concat(n)})):null,l=function(e){return e?Object(r.isString)(e)?s.a.createElement("h4",{className:"page-type"},e):e:null}(o);return s.a.createElement("header",{className:"page-header page-header-no-border clearfix"},i,s.a.createElement("div",{className:"button-group pull-right ".concat(c,"-page-header-button-group")},t),s.a.createElement("div",{className:"pull-left"},l,s.a.createElement("h1",{className:"wordwrap"},a)))};i.propTypes={children:o.a.node,icon:o.a.string,subtitle:o.a.node,title:o.a.string.isRequired},t.a=i},1428:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),c=n.n(o),s=function(e){var t=e.children;return c.a.createElement("div",{className:"call-to-action-block"},t)};s.propTypes={children:a.a.node},t.a=s},1452:function(e,t,n){"use strict";n.d(t,"f",function(){return p}),n.d(t,"e",function(){return f}),n.d(t,"c",function(){return d}),n.d(t,"g",function(){return m}),n.d(t,"d",function(){return h}),n.d(t,"h",function(){return b}),n.d(t,"b",function(){return y}),n.d(t,"i",function(){return v}),n.d(t,"a",function(){return O});n(31),n(33),n(27),n(67),n(35),n(34);var r=n(2),a=n(122),o=n(23),c=n(1404),s=n(1405),i=n(38),l=new a.a("".concat(o.a.host).concat(o.a.context,"/json"));function u(e){return l.serviceCall({url:Object(i.a)("/users?_action=template",{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=4.1"},type:"POST"})}function p(e){return l.serviceCall({url:Object(i.a)("/users?_action=schema",{realm:e}),headers:{"Accept-API-Version":"protocol=2.0,resource=4.1"},type:"POST"})}function f(e){return Promise.all([p(e),u(e)]).then(function(e){return{schema:e[0],values:e[1]}})}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(s.a)(t.pagination),r=Object(c.a)(t.fields);return l.serviceCall({url:Object(i.a)("/users?_queryFilter=true".concat(n).concat(r),{realm:e}),headers:{"Accept-API-Version":"protocol=2.1,resource=4.0"}})}function m(e,t){var n=Object(r.map)(t,function(t){return l.serviceCall({url:Object(i.a)("/users/".concat(encodeURIComponent(t)),{realm:e}),headers:{"Accept-API-Version":"protocol=2.1,resource=4.0"},suppressSpinner:!0,type:"DELETE",errorsHandlers:{Forbidden:{status:403}}})});return Promise.all(n)}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object(s.a)(n.pagination),a=Object(c.a)(n.fields);return l.serviceCall({url:Object(i.a)("/users?_queryId=".concat(encodeURIComponent(t),"*").concat(r).concat(a),{realm:e}),headers:{"Accept-API-Version":"protocol=2.1,resource=4.0"}})}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(s.a)(t.pagination),r=Object(c.a)(t.fields),a=t.pagination.searchTerm,o=a?encodeURIComponent('_id co "'.concat(a,'" or cn co "').concat(a,'" or mail co "').concat(a,'"')):"true";return l.serviceCall({url:Object(i.a)("/users?_queryFilter=".concat(o).concat(n).concat(r),{realm:e}),headers:{"Accept-API-Version":"protocol=2.1, resource=4.0"}})}function y(e,t){return l.serviceCall({url:Object(i.a)("/users/".concat(encodeURIComponent(t)),{realm:e}),headers:{"Accept-API-Version":"protocol=2.1,resource=4.0"}})}function v(e,t,n){return l.serviceCall({url:Object(i.a)("/users/".concat(encodeURIComponent(n)),{realm:e}),type:"PUT",headers:{"Accept-API-Version":"protocol=2.0,resource=4.0","If-Match":"*"},data:JSON.stringify(function(e){return Object(r.omitBy)(e,function(e,t){return Object(r.startsWith)(t,"_")})}(t))})}function O(e,t,n){return l.serviceCall({url:Object(i.a)("/users/".concat(encodeURIComponent(n)),{realm:e}),type:"PUT",headers:{"Accept-API-Version":"protocol=2.1,resource=4.0","If-None-Match":"*"},data:JSON.stringify(t)})}},1468:function(e,t,n){"use strict";n(15),n(36);var r=n(0),a=n.n(r),o=n(1),c=n.n(o),s=function(e){var t=e.children,n=e.header,r=e.description,a=r?c.a.createElement("p",{className:"block-description"},r):void 0;return c.a.createElement("div",{className:"block clearfix"},c.a.createElement("h3",{className:"block-header"},n),a,t)};s.propTypes={children:a.a.oneOfType([a.a.arrayOf(a.a.node),a.a.node]).isRequired,description:a.a.string,header:a.a.string.isRequired},t.a=s},1469:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),c=n.n(o),s=function(e){var t=e.children;return c.a.createElement("p",{className:"page-description"},t)};s.propTypes={children:a.a.node},t.a=s},1699:function(e,t,n){"use strict";n.r(t);n(15),n(36),n(37),n(31),n(33),n(53),n(54),n(27),n(35),n(34);var r=n(2),a=n.n(r),o=n(25),c=n(16),s=n(1),i=n.n(s),l=n(122),u=n(23),p=n(38),f=new l.a("".concat(u.a.host).concat(u.a.context,"/json"));var d=n(1452),m=(n(81),n(97)),h=n(0),b=n.n(h),y=n(262),v=n(223),O=n(391),g=n(224);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var j=function(e){var t=e.inputValue;if(Object(r.isEmpty)(t))return Object(c.b)("common.form.searchPrompt")},S=function(){return null},w=function(e){return Object(c.b)("common.form.searchForPrompt",{label:e})},P=function(e){return i.a.createElement(m.b,E({className:"react-select-single",components:{DropdownIndicator:y.a,Option:v.a,SingleValue:O.a},formatCreateLabel:w,isClearable:!0,isLoading:!0,loadingMessage:S,noOptionsMessage:j,styles:g.a},e))};P.propTypes={inputId:b.a.string.isRequired,onChange:b.a.func.isRequired};var I=P,_=n(1428),C=n(1469),R=(n(143),n(115),n(50),n(124),n(1468)),A=n(64),k=n(11),T=n.n(k),x=n(1626);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.n(x)()(T.a);var F=function(e){var t=Math.abs(T()(e).diff(T.a.now(),"seconds")),n=t<300?"s _":"d _ h _  m _ s _";return T.a.duration(t,"seconds").format(n,{trim:"both"})},B=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return r=this,a=(e=U(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==N(a)&&"function"!=typeof a?H(r):a,D(H(n),"handleDelete",function(){n.props.onDelete(n.props.data)}),D(H(n),"handleSelect",function(e){n.props.onSelect(n.props.data,e.target.checked)}),n}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,s["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.checked,n=e.data,r=e.sessionHandle,s=a.a.uniqueId("select"),l=n.sessionHandle===r?i.a.createElement(o.b,null,Object(c.b)("console.sessions.yourSession")):i.a.createElement(o.d,{className:"pull-right"},i.a.createElement(o.c,{bsStyle:"link",onClick:this.handleDelete,title:Object(c.b)("console.sessions.invalidate")},i.a.createElement("i",{className:"fa fa-close"})));return i.a.createElement("tr",{className:t?"selected":void 0},i.a.createElement("td",null,i.a.createElement(o.i,{htmlFor:s,srOnly:!0},Object(c.b)("common.form.select")),i.a.createElement("input",{checked:t,disabled:n.sessionHandle===r,id:s,onChange:this.handleSelect,type:"checkbox"})),i.a.createElement("td",null,F(n.latestAccessTime)),i.a.createElement("td",{title:Object(c.b)("console.sessions.table.expires",{timestamp:T()(n.maxIdleExpirationTime).toISOString()})},F(n.maxIdleExpirationTime)),i.a.createElement("td",{title:Object(c.b)("console.sessions.table.expires",{timestamp:T()(n.maxSessionExpirationTime).toISOString()})},F(n.maxSessionExpirationTime)),i.a.createElement("td",{className:"fr-col-btn-1"},l))}}])&&q(n.prototype,r),l&&q(n,l),t}();B.propTypes={checked:b.a.bool.isRequired,data:b.a.arrayOf(b.a.shape({latestAccessTime:b.a.string.isRequired,maxIdleExpirationTime:b.a.string.isRequired,maxSessionExpirationTime:b.a.string.isRequired,sessionHandle:b.a.string.isRequired})).isRequired,onDelete:b.a.func.isRequired,onSelect:b.a.func.isRequired,sessionHandle:b.a.string.isRequired};var J=B;function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q=function(e){return a.a.find(e,function(e){return e.sessionHandle===A.a.getState().local.session.sessionHandle})},X=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=W(t).call(this,e),n=!o||"object"!==M(o)&&"function"!=typeof o?z(r):o,G(z(n),"handleDeleteRow",function(e){n.props.onSessionsInvalidate([e])}),G(z(n),"handleDeleteSelected",function(){n.props.onSessionsInvalidate(n.state.checked)}),G(z(n),"handleSelectAll",function(e){n.setState({checked:e.target.checked?a.a.without(n.props.data,n.state.ownSession):[]})}),G(z(n),"handleSelectRow",function(e,t){var r=t?n.state.checked.concat(e):a.a.without(n.state.checked,e);n.setState({checked:r})}),n.state={checked:[],ownSession:Q(n.props.data)},n}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,s["Component"]),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=a.a.findByValues(e.data,"sessionHandle",a.a.map(this.state.checked,"sessionHandle"));this.setState({checked:t,ownSession:Q(e.data)})}},{key:"render",value:function(){var e,t=this,n=function(e){return a.a.includes(t.state.checked,e)};return i.a.createElement("div",null,i.a.createElement(o.e,{className:"page-toolbar"},i.a.createElement(o.c,{disabled:!this.state.checked.length,onClick:this.handleDeleteSelected},i.a.createElement("span",{className:"fa fa-close"})," ",Object(c.b)("console.sessions.invalidateSelected"))),i.a.createElement(o.w,null,i.a.createElement(o.w.Body,null,i.a.createElement(R.a,{header:this.props.username},i.a.createElement(o.A,null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"select-all-header-cell"},i.a.createElement(o.i,{htmlFor:"selectAll",srOnly:!0},Object(c.b)("common.form.selectAll")),i.a.createElement("input",{checked:(e=t.state.ownSession?t.props.data.length-1:t.props.data.length,e>0&&t.state.checked.length===e),id:"selectAll",onChange:this.handleSelectAll,type:"checkbox"})),i.a.createElement("th",null,Object(c.b)("console.sessions.table.headers.0")),i.a.createElement("th",null,Object(c.b)("console.sessions.table.headers.1")),i.a.createElement("th",null,Object(c.b)("console.sessions.table.headers.2")),i.a.createElement("th",{className:"fr-col-btn-1"}))),i.a.createElement("tbody",null,a.a.map(this.props.data,function(e){return i.a.createElement(J,{checked:n(e),data:e,onDelete:t.handleDeleteRow,onSelect:t.handleSelectRow,sessionHandle:A.a.getState().local.session.sessionHandle})})))))))}}])&&L(n.prototype,r),l&&L(n,l),t}();X.propTypes={data:b.a.arrayOf(b.a.shape({idleTime:b.a.string,maxIdleExpirationTime:b.a.string,maxSessionExpirationTime:b.a.string,sessionHandle:b.a.string})),onSessionsInvalidate:b.a.func.isRequired,username:b.a.string.isRequired};var Y=X,Z=n(1406),$=n(1400),ee=n(1401);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se=Object(r.debounce)(function(e,t,n){Object(r.isEmpty)(t)?n([]):Object(d.d)(e,t).then(function(e){n(Object(r.map)(e.result,function(e){var t=e.username;return{label:t,value:t}}))},function(e){return n(e.statusText)})},300),ie=function(e){function t(){var e,n,a,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,s=new Array(c),i=0;i<c;i++)s[i]=arguments[i];return a=this,o=(e=re(t)).call.apply(e,[this].concat(s)),n=!o||"object"!==te(o)&&"function"!=typeof o?ae(a):o,ce(ae(n),"state",{sessions:[]}),ce(ae(n),"handleInvalidateSessions",function(e,t){(function(e){return f.serviceCall({url:Object(p.a)("/sessions?_action=logoutByHandle",{realm:!1}),type:"POST",headers:{"Accept-API-Version":"protocol=1.0,resource=2.0"},data:JSON.stringify({sessionHandles:e})}).then(function(e){return e.result})})(Object(r.map)(t,"sessionHandle")).then(function(){return n.fetchSessionsByUsernameAndRealm(e,n.state.username)})}),ce(ae(n),"fetchSessionsByUsernameAndRealm",function(e,t){(function(e,t){var n=encodeURIComponent('username eq "'.concat(t,'" and realm eq "').concat(e,'"'));return f.serviceCall({url:Object(p.a)("/sessions?_queryFilter=".concat(n),{realm:!1}),headers:{"Accept-API-Version":"protocol=1.0,resource=2.0"}}).then(function(e){return e.result})})(e,t).then(function(e){n.setState({sessions:e,username:t})})}),ce(ae(n),"handleInputChange",function(e,t){t.action["input-change"]&&e!==n.state.username&&n.setState({username:e})}),ce(ae(n),"handleOnChange",function(e,t){var r=t.action;if("create-option"!==r&&"select-option"!==r||!e.value)"clear"===r&&n.setState({sessions:[],username:null});else{var a=n.props.router.params[0];n.fetchSessionsByUsernameAndRealm(a,e.value)}}),n}var n,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(t,s["Component"]),n=t,(a=[{key:"render",value:function(){var e,t=this.props.router.params[0];return this.state.sessions.length?e=i.a.createElement(Y,{data:this.state.sessions,onSessionsInvalidate:Object(r.partial)(this.handleInvalidateSessions,t),username:this.state.username}):this.state.username&&(e=i.a.createElement(o.w,null,i.a.createElement(o.w.Body,null,i.a.createElement(_.a,null,i.a.createElement("h3",null,Object(c.b)("console.sessions.table.noResults")))))),i.a.createElement("div",null,i.a.createElement(Z.a,{title:Object(c.b)("console.sessions.title")}),i.a.createElement(C.a,null,Object(c.b)("console.sessions.search.intro")),i.a.createElement(o.m,{controlId:"findAUser"},i.a.createElement(o.i,{srOnly:!0},Object(c.b)("console.sessions.search.title")),i.a.createElement(I,{inputId:"findAUser",loadOptions:Object(r.partial)(se,t),onChange:this.handleOnChange,onInputChange:this.handleInputChange,placeholder:Object(c.b)("console.sessions.search.placeholder")})),e)}}])&&ne(n.prototype,a),l&&ne(n,l),t}();ce(ie,"propTypes",{router:ee.a});t.default=Object($.a)(ie)}}]);
//# sourceMappingURL=77.0853cf4d25.js.map