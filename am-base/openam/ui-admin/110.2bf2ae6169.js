(window.webpackJsonp=window.webpackJsonp||[]).push([[110,220,287],{1251:function(e,t,n){var o=n(158);e.exports=(o.default||o).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,o,a){var r,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<select class="form-control">\n    <option disabled value="">'+e.escapeExpression("function"==typeof(r=null!=(r=l(n,"placeholder")||(null!=t?l(t,"placeholder"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"placeholder",hash:{},data:a,loc:{start:{line:9,column:30},end:{line:9,column:45}}}):r)+"...</option>\n</select>\n"},useData:!0})},1318:function(e,t,n){var o=n(158);e.exports=(o.default||o).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,o,a){var r,l=null!=t?t:e.nullContext||{},i=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(r=e.invokePartial(u(o,"headers/_Title"),t,{name:"headers/_Title",hash:{title:"console.authentication.modules.addModuleTitle"},data:a,helpers:n,partials:o,decorators:e.decorators}))?r:"")+'<div class="panel panel-default fr-panel-with-border">\n    <div class="panel-body tab-content">\n        <div class="block clearfix form-horizontal">\n            <div class="form-group">\n                <label class="col-sm-2 control-label" for="newModuleName">'+c((u(n,"t")||t&&u(t,"t")||i).call(l,"common.form.name",{name:"t",hash:{},data:a,loc:{start:{line:13,column:74},end:{line:13,column:98}}}))+'</label>\n                <div class="col-sm-9">\n                    <input autofocus type="text" id="newModuleName" data-module-name class="form-control" placeholder="'+c((u(n,"t")||t&&u(t,"t")||i).call(l,"common.form.validation.required",{name:"t",hash:{},data:a,loc:{start:{line:15,column:119},end:{line:15,column:158}}}))+'" required>\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="col-sm-2 control-label" for="newModuleType">'+c((u(n,"t")||t&&u(t,"t")||i).call(l,"common.form.type",{name:"t",hash:{},data:a,loc:{start:{line:19,column:74},end:{line:19,column:98}}}))+'</label>\n                <div class="col-sm-9">\n                    <div data-module-type></div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="panel-footer clearfix">\n        <div class="pull-right">\n            <a class="btn btn-default" href="'+c((u(n,"routeTo")||t&&u(t,"routeTo")||i).call(l,"realmsAuthenticationModules",null!=t?u(t,"realmPath"):t,{name:"routeTo",hash:{},data:a,loc:{start:{line:28,column:45},end:{line:28,column:96}}}))+'">\n                '+c((u(n,"t")||t&&u(t,"t")||i).call(l,"common.form.cancel",{name:"t",hash:{},data:a,loc:{start:{line:29,column:16},end:{line:29,column:42}}}))+'\n            </a>\n            <button type="button" data-save disabled class="btn btn-primary">\n                <span>'+c((u(n,"t")||t&&u(t,"t")||i).call(l,"common.form.create",{name:"t",hash:{},data:a,loc:{start:{line:32,column:22},end:{line:32,column:48}}}))+"</span>\n            </button>\n        </div>\n    </div>\n  </div>\n"},usePartial:!0,useData:!0})},1437:function(e,t,n){"use strict";n(15),n(36),n(37),n(31),n(33),n(50),n(144),n(27),n(67),n(62),n(35),n(34);var o=n(2),a=n(14),r=n.n(a),l=n(122),i=n(23),c=n(38),u=n(214),s=n(142),d=n(273);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,a=!1,r=void 0;try{for(var l,i=e[Symbol.iterator]();!(o=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(a)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var m=new l.a("".concat(i.a.host).concat(i.a.context,"/json"));m.authentication={get:function(e){return d.a.schemaWithValues(m,Object(c.a)("/realm-config/authentication",{realm:e}))},update:function(e,t){return m.serviceCall({url:Object(c.a)("/realm-config/authentication",{realm:e}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"PUT",data:JSON.stringify(t)})},chains:{all:function(e){return Promise.all([m.serviceCall({url:Object(c.a)("/realm-config/authentication/chains?_queryFilter=true",{realm:e}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}),m.serviceCall({url:Object(c.a)("/realm-config/authentication",{realm:e}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})]).then(function(e){var t=p(e,2),n=t[0],a=t[1];return Object(o.each)(n.result,function(e){e._id===a.adminAuthModule&&(e.defaultConfig=e.defaultConfig||{},e.defaultConfig.adminAuthModule=!0),e._id===a.orgConfig&&(e.defaultConfig=e.defaultConfig||{},e.defaultConfig.orgConfig=!0)}),{values:n}})},create:function(e,t){return m.serviceCall({url:Object(c.a)("/realm-config/authentication/chains?_action=create",{realm:e}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST",data:JSON.stringify(t)})},get:function(e,t){var n;return Promise.all([m.serviceCall({url:Object(c.a)("/realm-config/authentication",{realm:e}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}),m.serviceCall({url:Object(c.a)("/realm-config/authentication/chains/".concat(t),{realm:e}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}),m.serviceCall({url:Object(c.a)("/realm-config/authentication/modules?_queryFilter=true",{realm:e}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})]).then(function(e){var t=p(e,3),a=t[0],r=t[1],l=t[2];return r._id===a.adminAuthModule&&(r.adminAuthModule=!0),r._id===a.orgConfig&&(r.orgConfig=!0),r.authChainConfiguration=r.authChainConfiguration||[],Object(o.each)(r.authChainConfiguration,function(e){(n=Object(o.find)(l.result,{_id:e.module}))&&(e.type=n.type)}),{chainData:r,modulesData:Object(o.sortBy)(l.result,"_id")}})},remove:function(e,t){var n=t.map(function(t){return m.serviceCall({url:Object(c.a)("/realm-config/authentication/chains/".concat(t),{realm:e}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},suppressSpinner:!0,type:"DELETE"})});return Promise.all(n)},update:function(e,t,n){return m.serviceCall({url:Object(c.a)("/realm-config/authentication/chains/".concat(t),{realm:e}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"PUT",data:JSON.stringify(n)})}},modules:{all:function(e){return m.serviceCall({url:Object(c.a)("/realm-config/authentication/modules?_queryFilter=true",{realm:e}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(function(e){var t=e.result;return Object(o.sortBy)(t,"_id")})},create:function(e,t,n){return m.serviceCall({url:Object(c.a)("/realm-config/authentication/modules/".concat(n,"?_action=create"),{realm:e}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST",data:JSON.stringify(t)})},get:function(e,t,n){return Promise.all([this.schema(e,n),m.serviceCall({url:Object(c.a)("/realm-config/authentication/modules/".concat(n,"/").concat(t),{realm:e}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}),this.types.get(e,n)]).then(function(e){var t=p(e,3),n=t[0],o=t[1];return{name:t[2].name,schema:n,values:new s.a(o)}})},exists:function(e,t){var n=r.a.Deferred(),o="_queryFilter=".concat(encodeURIComponent('_id eq "'.concat(t,'"')),"&_fields=_id");return m.serviceCall({url:Object(c.a)("/realm-config/authentication/modules?".concat(o),{realm:e}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(function(e){n.resolve(e.result.length>0)}),n},remove:function(e,t,n){return m.serviceCall({url:Object(c.a)("/realm-config/authentication/modules/".concat(n,"/").concat(t),{realm:e}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},suppressSpinner:!0,type:"DELETE"})},update:function(e,t,n,o){return m.serviceCall({url:Object(c.a)("/realm-config/authentication/modules/".concat(n,"/").concat(t),{realm:e}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"PUT",data:o}).then(function(e){return new s.a(e)})},types:{all:function(e){return m.serviceCall({url:Object(c.a)("/realm-config/authentication/modules?_action=getAllTypes",{realm:e}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"}).then(function(e){var t=e.result;return Object(o.sortBy)(t,"name")})},get:function(e,t){return m.authentication.modules.types.all(e).then(function(e){return Object(o.find)(e,{_id:t})})}},schema:function(e,t){return m.serviceCall({url:Object(c.a)("/realm-config/authentication/modules/".concat(t,"?_action=schema"),{realm:e}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"}).then(function(e){return new u.a(e)})}}},t.a=m},1508:function(e,t,n){"use strict";n.d(t,"a",function(){return y});n(15),n(36),n(37),n(143),n(63),n(33),n(50),n(53),n(54),n(27),n(35),n(34),n(1411);var o=n(14),a=n.n(o),r=n(100),l=n(2),i=n.n(l),c=n(1251),u=n.n(c);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){if(null==e)throw new Error("Field ".concat(t," is required"))}function v(e){return e?function(t){return e.setData(t),e.render().$el.html()}:void 0}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,m(t).apply(this,arguments))}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r["View"]),n=t,(o=[{key:"initialize",value:function(e){var t=e.options,n=e.searchFields,o=e.labelField,r=e.selectedOption,l=e.onChange,c=e.itemComponent,u=e.optionComponent,s=e.placeholderText,d=void 0===s?a.a.t("common.form.select"):s;h(t,"options"),h(t,"searchFields"),null!=c&&null!=u||h(t,"labelField"),i.a.assign(this,{options:t,searchFields:n,labelField:o,selectedOption:r,onChange:l,itemComponent:c,optionComponent:u,placeholderText:d})}},{key:"render",value:function(){var e=this,t=u()({placeholder:this.placeholderText}),n=i.a.map(this.options,function(e,t){var n=i.a.clone(e);return n.__selectize_key=t,n});return this.$el.html(t).find("select").selectize({options:n,items:[i.a.indexOf(this.options,this.selectedOption)],valueField:"__selectize_key",searchField:this.searchFields,labelField:this.labelField,render:{item:v(this.itemComponent),option:v(this.optionComponent)},onChange:function(t){e.onChange(e.options[t])}}),this}}])&&d(n.prototype,o),l&&d(n,l),t}()},1661:function(e,t,n){"use strict";n.r(t);n(143),n(63),n(50);var o=n(2),a=n.n(o),r=n(14),l=n.n(r),i=n(123),c=n(1318),u=n.n(c),s=n(1437),d=n(52),p=n(41),m=n(1508);t.default=i.a.extend({template:u.a,events:{"change [data-module-name]":"onValidateModuleProps","keyup  [data-module-name]":"onValidateModuleProps","change [data-module-type]":"onValidateModuleProps","click [data-save]":"save"},render:function(e,t){var n=this;this.data.realmPath=e[0],s.a.authentication.modules.types.all(this.data.realmPath).then(function(e){n.parentRender(function(){var o=new m.a({options:e,onChange:function(e){n.moduleType=e._id,n.onValidateModuleProps()},searchFields:["name"],labelField:"name",placeholderText:l.a.t("console.authentication.modules.selectModuleType")});n.$el.find("[data-module-type]").append(o.render().el),n.$el.find("[autofocus]").focus(),t&&t()})})},save:function(){var e=this,t=e.$el.find("#newModuleName").val(),n=this.moduleType,o=s.a.authentication.modules;o.exists(e.data.realmPath,t).then(function(r){var i=o;r?d.a.addMessage({type:d.a.TYPE_DANGER,message:l.a.t("console.authentication.modules.addModuleError")}):i.create(e.data.realmPath,{_id:t},n).then(function(){p.a.routeTo(p.a.configuration.routes.realmsAuthenticationModuleEdit,{args:a.a.map([e.data.realmPath,n,t],encodeURIComponent),trigger:!0})},function(e){d.a.addMessage({type:d.a.TYPE_DANGER,response:e})})},function(e){d.a.addMessage({type:d.a.TYPE_DANGER,response:e})})},onValidateModuleProps:function(){(function(){var e=this.moduleType,t=this.$el.find("#newModuleName").val();-1!==t.indexOf(" ")&&(t=!1,d.a.addMessage({type:d.a.TYPE_DANGER,message:l.a.t("console.authentication.modules.moduleNameValidationError")}));var n=t&&e;this.$el.find("[data-save]").attr("disabled",!n)}).call(this)}})}}]);
//# sourceMappingURL=110.2bf2ae6169.js.map