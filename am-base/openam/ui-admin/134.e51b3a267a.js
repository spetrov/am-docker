(window.webpackJsonp=window.webpackJsonp||[]).push([[134,190],{1288:function(e,t,n){var a=n(158);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,r){var o,i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(o=e.invokePartial(i(a,"headers/_TitleWithSubAndIcon"),t,{name:"headers/_TitleWithSubAndIcon",hash:{icon:"male",type:"console.applications.agents.java.agents.edit.type",title:null!=t?i(t,"id"):t},data:r,helpers:n,partials:a,decorators:e.decorators}))?o:"")+"\n<form data-json-form></form>\n"},usePartial:!0,useData:!0})},1680:function(e,t,n){"use strict";n.r(t);n(15),n(36),n(37),n(31),n(143),n(185),n(33),n(50),n(368),n(53),n(54),n(27),n(67),n(62),n(35),n(114),n(34),n(271);var a=n(2),r=n(16),o=n(14),i=n.n(o),u=n(1419),c=n(1412),s=n(1545),l=n(1409),f=n(1410),p=n(123),g=n(1408),h=n(214),d=n(142),v=n(52),b=n(1440),m=n(41),w=n(1446),y=n(1441),O=n(1442),j=n(1288),S=n.n(j);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t,n,a,r,o,i){try{var u=e[o](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(a,r)}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(a=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function V(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function P(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var C=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=P(this,k(t).call(this))).template=S.a,e.events={"click [data-delete]":"onDelete","click [data-inherit-value]":"toggleInheritance","click [data-save]":"onSave"},e}var n,o,j;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,p["a"]),n=t,(o=[{key:"getJSONSchemaView",value:function(){return this.subview.getBody()}},{key:"getGroupValues",value:function(e,t){return e?Object(c.b)(t,l.b,e):i.a.Deferred().resolve({})}},{key:"render",value:function(e){var t=this,n=J(e,2),o=n[0],f=n[1];this.data={id:f,headerActions:[{actionPartial:"form/_Button",data:"delete",title:"common.form.delete",icon:"fa-times"}]},this.realm=o,Promise.all([Object(u.e)(o,l.b),Object(u.b)(o,l.b,f),Object(c.c)(o,l.b)]).then(function(e){var n=J(e,3),u=n[0],c=n[1];!function(e,t){var n=Object(a.get)(e,"properties.globalJ2EEAgentConfig.properties.agentgroup");if(n){var o=Object(a.map)(t.result,"_id"),i=[""].concat(_(o)),u=[Object(r.b)("common.form.unassigned")].concat(_(o));n.additional={alert:"alert-info"},n.enum=i,n.options={enum_titles:u}}else console.error('[EditJavaAgent] Unable to add available Java Agent Groups to "globalJ2EEAgentConfig.properties.agentgroup" property.')}(u,n[2]),c=Object(s.b)(c,"globalJ2EEAgentConfig.cdssoRootUrl"),t.schema=new h.a(u),t.values=new d.a(c),t.nonInheritedValues=Object(a.cloneDeep)(t.values);var l=function(){var e=function(e,t){var n=t.replace(".",".properties."),r=Object(a.get)(e.raw.properties,n);return e.hasInheritance(r)},n=function(e,n){var a=t.getJSONSchemaView();a.options.hideInheritance=!e,a.setData(n),a.render()},r=t.getJSONSchemaView().subview.jsonEditor.element,u=i()("[name='root[agentgroup]']",r).val(),c=t.values.raw.globalJ2EEAgentConfig.agentgroup;u?u===c?n(u):t.getGroupValues(u,o).then(function(r){t.defaultValues=new d.a(r),t.values=t.values.mapProperties(function(n,o){if(e(t.schema,o)){var i=Object(a.get)(n,"inherited")?Object(a.get)(r,o):n.value;return{inherited:n.inherited,value:i}}return n}),t.values.raw.globalJ2EEAgentConfig.agentgroup=u,n(u,t.values.raw[t.getSection()])}):(t.values=t.nonInheritedValues.mapProperties(function(n,a){return e(t.schema,a)?{inherited:!1,value:n.value}:n}),t.values.raw.globalJ2EEAgentConfig.agentgroup=u,n(u,t.values.raw[t.getSection()]))},f=Object(a.get)(t.values.raw,"globalJ2EEAgentConfig.agentgroup");t.getGroupValues(f,o).then(function(e){t.defaultValues=new d.a(e),t.parentRender(function(){var e,n=(e=t.schema,Object(a.chain)(e.raw.properties).map(function(e,t){return{id:t,order:e.propertyOrder,title:e.title}}).sortBy("order").value());t.subview=new y.a({tabs:n,createBody:function(e){var n=Object(a.get)(t.values.raw,"globalJ2EEAgentConfig.agentgroup"),r=new g.a({hideInheritance:Object(a.isEmpty)(n),schema:new h.a(t.schema.raw.properties[e]),values:new d.a(Object(a.cloneDeep)(t.values.raw)[e]),onRendered:function(){r.watch("root.agentgroup",l)}});return r},createFooter:function(){return new b.a({partial:"form/_JSONSchemaFooter"})}});var r={properties:t.schema.raw.properties,onChange:function(e,n){t.subview.setTabId(e),Object(w.a)(t.$el.find('[data-schemapath="root.'.concat(n,'"]')))}};t.$el.find("[data-tab-search]").append(new O.a(r).render().$el),t.subview.setElement("[data-json-form]"),t.subview.render()})})})}},{key:"getSection",value:function(){return this.subview.getTabId()}},{key:"updateValues",value:function(){var e,t,n;this.values=this.values.extend((e={},t=this.getSection(),n=this.getJSONSchemaView().getData(),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),this.nonInheritedValues=Object(a.cloneDeep)(this.values)}},{key:"onSave",value:function(){if(this.getJSONSchemaView().isValid()){this.updateValues();var e=this.values.removeNullPasswords(this.schema),t=Object(s.a)(e.raw,"globalJ2EEAgentConfig.cdssoRootUrl");Object(u.g)(this.realm,l.b,t,this.data.id).then(function(){v.a.addMessage({message:Object(r.b)("config.messages.CommonMessages.changesSaved")})},function(e){v.a.addMessage({response:e,type:v.a.TYPE_DANGER})})}else v.a.addMessage({message:Object(r.b)("common.form.validation.errorsNotSaved"),type:v.a.TYPE_DANGER})}},{key:"toggleInheritance",value:function(e){var t=e.currentTarget,n=t.getAttribute("data-schemapath").slice(5),a=!("true"===t.getAttribute("data-inherit-value")),r=a?this.defaultValues.raw[this.getSection()][n]:this.nonInheritedValues.raw[this.getSection()][n].value;a&&(this.nonInheritedValues.raw[this.getSection()][n].value=this.getJSONSchemaView().getData()[n].value),this.getJSONSchemaView().subview.toggleInheritance(n,r,a),this.values=this.values.addValueForPath("".concat(this.getSection(),".").concat(n),{inherited:a,value:r})}},{key:"onDelete",value:function(){var e=this;Object(f.b)({names:[this.data.id],objectName:"agent",onConfirm:function(){var t,n=(t=regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(u.f)(e.realm,l.b,[e.data.id]);case 3:m.a.routeTo(m.a.configuration.routes.realmsApplicationsAgentsJava,{args:[encodeURIComponent(e.realm)],trigger:!0}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),v.a.addMessage({response:t.t0,type:v.a.TYPE_DANGER});case 9:case"end":return t.stop()}},t,null,[[0,6]])}),function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function i(e){A(o,a,r,i,u,"next",e)}function u(e){A(o,a,r,i,u,"throw",e)}i(void 0)})});return function(){return n.apply(this,arguments)}}()})}}])&&V(n.prototype,o),j&&V(n,j),t}();t.default=C}}]);
//# sourceMappingURL=134.e51b3a267a.js.map