(window.webpackJsonp=window.webpackJsonp||[]).push([[76,156,175,296],{1233:function(e,t,n){var a=n(158);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'<a class="btn info-button visible-lg-inline-block visible-md-inline-block visible-sm-inline-block" tabindex="0" data-toggle="popoverclickaway">\n    <i class="fa fa-info-circle"></i>\n</a>\n'},useData:!0})},1234:function(e,t,n){var a=n(158);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="subnav-container">\n    <div class="container">\n        <strong><i class="fa fa-angle-left text-muted"></i> <a href="'+c("function"==typeof(o=null!=(o=l(n,"hash")||(null!=t?l(t,"hash"):t))?o:r)?o.call(s,{name:"hash",hash:{},data:i,loc:{start:{line:10,column:69},end:{line:10,column:77}}}):o)+'">'+c("function"==typeof(o=null!=(o=l(n,"title")||(null!=t?l(t,"title"):t))?o:r)?o.call(s,{name:"title",hash:{},data:i,loc:{start:{line:10,column:79},end:{line:10,column:88}}}):o)+"</a></strong>\n    </div>\n</div>\n"},useData:!0})},1273:function(e,t,n){var a=n(158);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<nav id="backlink"></nav>\n<div class="container">\n'+(null!=(o=e.invokePartial(l(a,"headers/_TitleWithSubAndIcon"),t,{name:"headers/_TitleWithSubAndIcon",hash:{icon:"bookmark-o",type:"console.sites.edit.title",title:null!=t?l(t,"name"):t},data:i,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?o:"")+'\n    <div class="panel panel-default">\n        <div class="panel-body">\n            <div data-json-form></div>\n        </div>\n        <div class="panel-footer clearfix">\n            <div class="pull-right">\n                <a class="btn btn-default" href="'+c((l(n,"routeTo")||t&&l(t,"routeTo")||r).call(s,"listSites",{name:"routeTo",hash:{},data:i,loc:{start:{line:18,column:49},end:{line:18,column:72}}}))+'">'+c((l(n,"t")||t&&l(t,"t")||r).call(s,"common.form.cancel",{name:"t",hash:{},data:i,loc:{start:{line:18,column:74},end:{line:18,column:100}}}))+'</a>\n                <button data-save class="btn btn-primary" type="button" disabled>'+c((l(n,"t")||t&&l(t,"t")||r).call(s,"common.form.saveChanges",{name:"t",hash:{},data:i,loc:{start:{line:19,column:81},end:{line:19,column:112}}}))+"</button>\n            </div>\n        </div>\n    </div>\n</div>\n"},usePartial:!0,useData:!0})},1403:function(e,t,n){"use strict";n(143),n(63),n(33),n(27),n(19),n(34),n(1413);var a=n(2),i=n.n(a),o=n(14),s=n.n(o),r=n(100),c=n.n(r),l=n(1414),u=n.n(l),d=n(1233),h=n.n(d),f=n(1416),p=n(214),m=n(142),v=n(1411);function g(e,t){var n=t.schema,a=t.values,i=t.hideInheritance,o=void 0!==i&&i;u.a.plugins.selectize.enable=!0,u.a.plugins.selectize.plugins=function(e){return[{name:"enum_plugin",options:{schema:e}}]},u.a.defaults.themes.openam=f.a.getTheme(6,4);var r=n.toFlatWithInheritanceMeta(a),c=a.removeInheritance();r=r.raw,c=c.raw;var l=new u.a(e[0],{disable_collapse:!0,disable_edit_json:!0,disable_properties:!0,hide_inheritance:o,iconlib:"fontawesome4",schema:r,theme:"openam"});return function(e){var t=h()();s()(e).find(".help-block:not(.errormsg)").addClass("hidden-lg hidden-md hidden-sm").each(function(e,n){var a=s()(t);a.popoverclickaway({container:"#content",html:!0,placement:"auto top",content:n.innerHTML}).click(function(e){e.preventDefault()}),s()(n).parent().append(a)})}(e),function(e){s()(e).find("input:password").attr("placeholder",s.a.t("common.form.passwordPlaceholder"))}(e),l.setValue(c),l}n.n(v).a.define("enum_plugin",function(e){var t,n=this,a=arguments,o=e.schema,s=i.a.indexOf(o.enum,"");s>-1?(n.plugins.settings.dropdown_header={title:o.options.enum_titles[s]},n.require("dropdown_header"),n.setup=(t=n.setup,function(){t.apply(n,a),n.$dropdown.on("mousedown",".selectize-dropdown-header",function(){return n.setValue(""),n.close(),n.blur(),!1})})):function(){var e;n.deleteSelection=(e=n.deleteSelection,function(t){return!!function(e){return!e||8!==e.keyCode}(t)&&e.apply(n,a)})}()});var b=c.a.View.extend({className:"jsoneditor-block",initialize:function(e){if(!(e.schema instanceof p.a))throw new TypeError('[JSONEditorView] "schema" argument is not an instance of JSONSchema.');if(!(e.values instanceof m.a))throw new TypeError('[JSONEditorView] "values" argument is not an instance of JSONValues.');this.options=i.a.defaults(e,{displayTitle:!0})},toggleInheritance:function(e,t,n){this.options.values=this.options.values.extend(this.getData()),this.options.values=this.options.values.addValueForPath([e,"inherited"],n),this.options.values=this.options.values.addValueForPath([e,"value"],t),this.render()},render:function(){this.$el.empty();var e=i.a.get(this.jsonEditor,"watchlist");return this.jsonEditor=g(this.$el,this.options),this.jsonEditor.watchlist=e,this.options.displayTitle||this.$el.find("[data-header]").parent().hide(),this},isValid:function(){return 0===this.jsonEditor.validate().length},getData:function(){var e=new m.a(this.jsonEditor.getValue());return this.options.schema.hasDefaultProperties()&&(e=e.pick(this.options.schema.raw.defaultProperties)),(e=(e=e.nullifyEmptyPasswords(this.options.schema.getPasswordKeys())).addInheritance(this.options.values.raw)).raw},setData:function(e){this.options.values=this.options.values.extend(e)},watch:function(e,t){this.jsonEditor.watch(e,t)},destroy:function(){var e=this,t=i.a.keys(this.jsonEditor.watchlist);i.a.forEach(t,function(t){e.jsonEditor.unwatch(t)}),this.jsonEditor.destroy(),this.jsonEditor=null}});t.a=b},1408:function(e,t,n){"use strict";n(33),n(27),n(34);var a=n(2),i=n.n(a),o=n(100),s=n.n(o),r=n(1403),c=n(214),l=n(142);var u=s.a.View.extend({initialize:function(e){if(!(e.schema instanceof c.a))throw new TypeError('[FlatJSONSchemaView] "schema" argument is not an instance of JSONSchema.');if(!(e.values instanceof l.a))throw new TypeError('[FlatJSONSchemaView] "values" argument is not an instance of JSONValues.');this.options=i.a.defaults(e,{showOnlyRequiredAndEmpty:!1,showOnlyRequired:!1})},render:function(){var e,t=this.options.schema,n=!0;if(this.options.showOnlyRequiredAndEmpty){var a=this.options.schema.getRequiredPropertyKeys(),o=this.options.values.getEmptyValueKeys(t),s=i.a.intersection(a,o);t=t.removeUnrequiredNonDefaultProperties().addDefaultProperties(s),n=!i.a.isEmpty(s)}else if(this.options.showOnlyRequired){var c=this.options.schema.getRequiredPropertyKeys();t=t.removeUnrequiredNonDefaultProperties().addDefaultProperties(c),n=!i.a.isEmpty(c)}return this.subview=new r.a({displayForm:n,hideInheritance:this.options.hideInheritance,displayTitle:!1,el:this.$el,schema:t,values:this.options.values}).render(),(e=this.options.onRendered)&&setTimeout(e,0),this},isValid:function(){return!this.subview||this.subview.isValid()},getData:function(){var e;if(this.subview)return(e=this.subview).getData.apply(e,arguments)},setData:function(e){if(this.subview)return this.options.values=this.options.values.extend(e),this.subview.setData(e)},watch:function(e,t){this.subview&&this.subview.watch(e,t)},destroy:function(){this.subview&&(this.subview.destroy(),this.subview=null)}});t.a=u},1423:function(e,t,n){"use strict";n(143),n(114);var a=n(2),i=n(1431),o=n.n(i);function s(e){e.data.dialog.$modalContent.find("[autofocus]").focus(),function(e){Object(a.each)(e.options.buttons,function(t){!0===t.disabled&&e.getButton(t.id).disable()})}(e.data.dialog)}var r={};r.TYPE_DEFAULT=o.a.TYPE_DEFAULT,r.TYPE_INFO=o.a.TYPE_INFO,r.TYPE_PRIMARY=o.a.TYPE_PRIMARY,r.TYPE_SUCCESS=o.a.TYPE_SUCCESS,r.TYPE_WARNING=o.a.TYPE_WARNING,r.TYPE_DANGER=o.a.TYPE_DANGER,r.SIZE_NORMAL=o.a.SIZE_NORMAL,r.SIZE_SMALL=o.a.SIZE_SMALL,r.SIZE_WIDE=o.a.SIZE_WIDE,r.SIZE_LARGE=o.a.SIZE_LARGE,Object(a.each)(["show","confirm","warning","danger","success"],function(e){r[e]=function(t){var n=new o.a[e](t),a=t.type||r.TYPE_PRIMARY;return a=a.replace("type","text"),n.getModalHeader().addClass(a),n.getModal().on("shown.bs.modal",{dialog:n},s),n}}),t.a=r},1427:function(e,t,n){"use strict";n.d(t,"a",function(){return o});n(31);var a=n(16),i=n(1423);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(a.b)("common.form.delete");i.a.confirm({type:i.a.TYPE_DANGER,title:"".concat(Object(a.b)("common.form.confirm")," ").concat(n),message:e.message?e.message:Object(a.b)("console.common.confirmDeleteText",{type:e.type}),btnOKLabel:n,btnOKClass:"btn-danger",callback:function(e){e&&t&&t()}})}},1429:function(e,t,n){"use strict";n(31);function a(e,t){console.warn("".concat(e," is marked as deprecated. \nPlease use ").concat(t))}n(143);var i=n(1427),o={showConfirmationBeforeDeleting:function(e,t){return a("FormHelper.showConfirmationBeforeDeleting","org/forgerock/openam/ui/admin/utils/form/showConfirmationBeforeAction"),Object(i.a)(e,t)},setActiveTab:function(e,t){return a("FormHelper.setActiveTab","org/forgerock/openam/ui/admin/utils/form/setActiveTab"),void((n=e)&&n.activeTabId&&n.$el.find('.nav-tabs a[href="'.concat(n.activeTabId,'"]')).tab("show"));var n}};t.a=o},1430:function(e,t,n){"use strict";n(159),n(82);var a=n(2),i=n.n(a),o=n(14),s=n.n(o),r=n(100),c=n.n(r),l=n(1234),u=n.n(l),d=n(88);function h(e,t){return i.a.take(e,t+1).join("/")}t.a=c.a.View.extend({el:"#backlink",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=d.a.getCurrentFragment().split("/"),n=t[e],a=i.a.startCase("".concat(n)),o={title:s.a.t("console.navigation.".concat(n,".title"),{defaultValue:a}),hash:"#".concat(h(t,e))};this.$el.html(u()(o))}})},1476:function(e,t,n){"use strict";n(31),n(33),n(27),n(67),n(35),n(34);var a=n(2),i=n.n(a),o=n(122),s=n(23),r=n(38),c=n(214),l=n(142),u=new o.a("".concat(s.a.host).concat(s.a.context,"/json")),d=function(e){return i.a.pick(e,["url","secondaryURLs"])},h=function(){return u.serviceCall({url:Object(r.a)("/global-config/sites?_action=schema",{realm:!1}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST",success:function(e){var t=d(e.properties);return e.properties=t,e}})},f=function(e){return u.serviceCall({url:Object(r.a)("/global-config/sites/".concat(e),{realm:!1}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},success:function(e,t){return e.etag=t.getResponseHeader("ETag"),e}})};u.sites={getAll:function(){return u.serviceCall({url:Object(r.a)("/global-config/sites?_queryFilter=true",{realm:!1}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(function(e){return i.a.sortBy(e.result,"_id")})},get:function(e){return Promise.all([h(),f(e)]).then(function(e){return{schema:new c.a(e[0]),values:new l.a(e[1])}})},create:function(e){return u.serviceCall({url:Object(r.a)("/global-config/sites?_action=create",{realm:!1}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST",data:JSON.stringify(i.a.omit(e,["servers"]))})},update:function(e,t,n){return u.serviceCall({url:Object(r.a)("/global-config/sites/".concat(e),{realm:!1}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0","If-Match":n},type:"PUT",data:JSON.stringify(d(t))})},remove:function(e,t){var n=function(e,t){return u.serviceCall({url:Object(r.a)("/global-config/sites/".concat(e),{realm:!1}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0","If-Match":t},type:"DELETE"})};return i.a.isUndefined(t)?f(e).then(function(t){return n(e,t.etag)}):n(e,t)},getInitialState:function(){return Promise.all([h(),u.serviceCall({url:Object(r.a)("/global-config/sites?_action=template",{realm:!1}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"})]).then(function(e){return{schema:new c.a(e[0]),values:new l.a(e[1])}})}},t.a=u},1650:function(e,t,n){"use strict";n.r(t);n(143),n(33),n(144),n(27),n(34);var a=n(16),i=n(14),o=n.n(i),s=n(123),r=n(1430),c=n(1273),l=n.n(c),u=n(1408),d=n(1429),h=n(52),f=n(41),p=n(1476);var m=s.a.extend({template:l.a,events:{"click [data-save]":"onSave","click [data-delete]":"onDelete"},render:function(e){var t=this;this.data.id=e[0],p.a.sites.get(this.data.id).then(function(e){t.data.name=e.values.raw._id,t.data.etag=e.values.raw.etag,t.data.headerActions=[{actionPartial:"form/_Button",data:"delete",title:"common.form.delete",icon:"fa-times"}],t.parentRender(function(){(new r.a).render(),t.jsonSchemaView&&t.jsonSchemaView.remove(),t.jsonSchemaView=new u.a({schema:e.schema,values:e.values,onRendered:function(){return e=t.$el,n=!0,void e.find("[data-save]").prop("disabled",!n);var e,n}}),o()(t.jsonSchemaView.render().el).appendTo(t.$el.find("[data-json-form]"))})})},onSave:function(){p.a.sites.update(this.data.id,this.jsonSchemaView.getData(),this.data.etag).then(function(){return h.a.addMessage({message:Object(a.b)("config.messages.CommonMessages.changesSaved")})},function(e){return h.a.addMessage({response:e,type:h.a.TYPE_DANGER})})},onDelete:function(e){var t=this;e.preventDefault(),d.a.showConfirmationBeforeDeleting({message:Object(a.b)("console.common.confirmDeleteText",{type:Object(a.b)("console.sites.common.confirmType")})},function(){p.a.sites.remove(t.data.id,t.data.etag).then(function(){return f.a.routeTo(f.a.configuration.routes.listSites,{args:[],trigger:!0})},function(e){return h.a.addMessage({response:e,type:h.a.TYPE_DANGER})})})}});t.default=new m}}]);
//# sourceMappingURL=76.8600a6dbbc.js.map