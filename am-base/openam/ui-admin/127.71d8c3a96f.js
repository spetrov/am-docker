(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{1451:function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"h",function(){return u}),r.d(t,"a",function(){return p}),r.d(t,"c",function(){return l}),r.d(t,"e",function(){return f}),r.d(t,"i",function(){return d}),r.d(t,"d",function(){return h}),r.d(t,"g",function(){return y}),r.d(t,"f",function(){return b}),r.d(t,"j",function(){return m}),r.d(t,"k",function(){return v}),r.d(t,"l",function(){return g});r(31),r(33),r(27),r(67),r(35),r(34);var n=r(2),c=r(122),o=r(23),a=new c.a("".concat(o.a.host).concat(o.a.context,"/json")),s="/global-config/secrets/stores";function i(e,t){return a.serviceCall({url:"".concat(s,"/").concat(e,"/").concat(encodeURIComponent(t)),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"}})}function u(e){return a.serviceCall({url:"".concat(s,"/").concat(e),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"}})}function p(e,t,r){return a.serviceCall({url:"".concat(s,"/").concat(e,"/").concat(encodeURIComponent(r)),type:"PUT",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0","If-None-Match":"*"},data:JSON.stringify(t)})}function l(e){return a.serviceCall({url:"".concat(s,"/").concat(e,"?_queryFilter=true"),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"}})}function f(e){return a.serviceCall({url:"".concat(s,"/").concat(e,"?_action=getCreatableTypes"),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"POST"})}function d(){return a.serviceCall({url:"".concat(s,"?_action=getAllTypes"),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"POST"}).then(function(e){var t=e.result;return Object(n.filter)(t,function(e){return!1===e.collection})})}function h(){return a.serviceCall({url:"".concat(s,"?_action=getCreatableTypes"),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"POST"})}function y(e){return a.serviceCall({url:"".concat(s,"/").concat(e,"?_action=schema"),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"POST"})}function b(e){return Promise.all([y(e),a.serviceCall({url:"".concat(s,"/").concat(e,"?_action=template"),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"POST"})]).then(function(e){return{schema:e[0],values:e[1]}})}function m(e){var t=Object(n.map)(e,function(e){return a.serviceCall({url:"".concat(s,"/").concat(e._type._id,"/").concat(encodeURIComponent(e._id)),headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},type:"DELETE",suppressSpinner:!0})});return Promise.all(t)}function v(e,t,r){return a.serviceCall({url:"".concat(s,"/").concat(e,"/").concat(encodeURIComponent(t)),type:"PUT",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},data:JSON.stringify(Object(n.omit)(r,"_rev"))})}function g(e,t){return a.serviceCall({url:"".concat(s,"/").concat(e),type:"PUT",headers:{"Accept-API-Version":"protocol=2.0,resource=1.0"},data:JSON.stringify(Object(n.omit)(t,"_rev"))})}},1648:function(e,t,r){"use strict";r.r(t);r(15),r(36),r(37),r(33),r(53),r(54),r(27),r(67),r(35),r(34),r(271);var n=r(10),c=r(2),o=r(25),a=r(0),s=r.n(a),i=r(1),u=r.n(i),p=r(1451),l=r(386),f=r(450),d=r(439),h=r(449),y=r(1402),b=r(1420),m=r(52),v=r(1526),g=r(41),O=r(1527);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,r,n,c,o,a){try{var s=e[o](a),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,c)}function j(e){return function(){var t=this,r=arguments;return new Promise(function(n,c){var o=e.apply(t,r);function a(e){S(o,n,c,a,s,"next",e)}function s(e){S(o,n,c,a,s,"throw",e)}a(void 0)})}}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=C(t).call(this,e),r=!o||"object"!==T(o)&&"function"!=typeof o?A(n):o,I(A(r),"handleCreate",function(){var e=j(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(p.a)(r.props.selectedType,t,r.state.id);case 3:g.a.routeTo(g.a.configuration.routes.editGlobalSecretStores,{args:Object(c.map)([r.props.selectedType,r.state.id],encodeURIComponent),trigger:!0}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),m.a.addMessage({response:e.t0,type:m.a.TYPE_DANGER});case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()),I(A(r),"handleIdChange",function(e){r.setState({id:e})}),I(A(r),"handleTypeChange",function(){var e=j(regeneratorRuntime.mark(function e(t){var n,c,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.props.setSelected(t),e.prev=1,e.next=4,Object(p.f)(t);case 4:n=e.sent,c=n.schema,o=n.values,a=Object(O.a)(c,t),r.props.addOrUpdateSchema(a,t),r.props.addOrUpdateTemplate(o,t),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),m.a.addMessage({response:e.t0,type:m.a.TYPE_DANGER});case 15:case"end":return e.stop()}},e,null,[[1,12]])}));return function(t){return e.apply(this,arguments)}}()),r.state={id:"",isFetching:!0},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,i["Component"]),r=t,(n=[{key:"componentDidMount",value:function(){var e=j(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.resetSelected(),e.prev=1,e.next=4,Object(p.d)();case 4:t=e.sent,r=t.result,this.props.setTypes(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),m.a.addMessage({response:e.t0,type:m.a.TYPE_DANGER});case 12:return e.prev=12,this.setState({isFetching:!1}),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[1,9,12,15]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=Object(b.a)(this.state.id),t=e&&!Object(c.isEmpty)(this.state.id)&&!Object(c.isEmpty)(this.props.selectedType);return u.a.createElement(o.n,null,u.a.createElement(v.a,{id:this.state.id,isCreateAllowed:t,isFetching:this.state.isFetching,isValidId:e,listRoute:g.a.configuration.routes.listGlobalSecretStores,onCreate:this.handleCreate,onIdChange:this.handleIdChange,onTypeChange:this.handleTypeChange,schema:this.props.schema,selectedType:this.props.selectedType,template:this.props.template,types:this.props.types}))}}])&&P(r.prototype,n),a&&P(r,a),t}();R.propTypes={addOrUpdateSchema:s.a.func.isRequired,addOrUpdateTemplate:s.a.func.isRequired,resetSelected:s.a.func.isRequired,schema:s.a.objectOf(s.a.any),selectedType:s.a.string,setSelected:s.a.func.isRequired,setTypes:s.a.func.isRequired,template:s.a.objectOf(s.a.any),types:s.a.arrayOf(s.a.object).isRequired},R=Object(y.a)(R,function(e){var t=e.local.config.global.secretStores.types.selected;return{schema:Object(c.get)(e.remote.config.global.secretStores.types.schema,[t]),selectedType:t,template:Object(c.get)(e.remote.config.global.secretStores.types.template,[t]),types:e.remote.config.global.secretStores.types.list}},function(e){return{addOrUpdateSchema:Object(n.a)(l.a,e),addOrUpdateTemplate:Object(n.a)(f.a,e),resetSelected:Object(n.a)(d.b,e),setSelected:Object(n.a)(d.c,e),setTypes:Object(n.a)(h.b,e)}}),t.default=R}}]);
//# sourceMappingURL=127.71d8c3a96f.js.map