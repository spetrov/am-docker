(window.webpackJsonp=window.webpackJsonp||[]).push([[5,140,146,159,288,289,296],{1233:function(e,t,n){var a=n(158);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,o){return'<a class="btn info-button visible-lg-inline-block visible-md-inline-block visible-sm-inline-block" tabindex="0" data-toggle="popoverclickaway">\n    <i class="fa fa-info-circle"></i>\n</a>\n'},useData:!0})},1236:function(e,t,n){var a=n(158);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,o){var r,i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(r=e.invokePartial(i(a,"form/_Select"),t,{name:"form/_Select",data:o,helpers:n,partials:a,decorators:e.decorators}))?r:""},usePartial:!0,useData:!0})},1238:function(e,t,n){var a=n(158);e.exports=(a.default||a).template({1:function(e,t,n,a,o){return'<div data-tab-footer class="panel-footer clearfix"></div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,o){var r,i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="panel-body">\n    <div data-tab-panel role="tabpanel"></div>\n</div>\n\n'+(null!=(r=i(n,"if").call(null!=t?t:e.nullContext||{},null!=t?i(t,"tabFooter"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:12,column:0},end:{line:14,column:7}}}))?r:"")},useData:!0})},1239:function(e,t,n){var a=n(158);e.exports=(a.default||a).template({1:function(e,t,n,a,o){var r=e.lambda,i=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <li>\n                <a href="" data-tab-id="'+i(r(null!=t?s(t,"id"):t,t))+'" role="tab" data-toggle="tab" aria-expanded="false">'+i(r(null!=t?s(t,"title"):t,t))+"</a>\n            </li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,o){var r,i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="tab-menu">\n    <ul class="nav nav-tabs" role="tablist">\n'+(null!=(r=i(n,"each").call(null!=t?t:e.nullContext||{},null!=t?i(t,"tabs"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:10,column:8},end:{line:14,column:17}}}))?r:"")+'    </ul>\n</div>\n\n<div data-tab-component-panel class="panel panel-default fr-panel-tab"></div>\n'},useData:!0})},1260:function(e,t,n){var a=n(158);e.exports=(a.default||a).template({1:function(e,t,n,a,o){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <button data-revert class="btn btn-default" type="button">\n        '+e.escapeExpression((r(n,"t")||t&&r(t,"t")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"common.form.revert",{name:"t",hash:{},data:o,loc:{start:{line:11,column:8},end:{line:11,column:34}}}))+"\n    </button>\n"},3:function(e,t,n,a,o){return"disabled"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,o){var r,i=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\x3c!--\n  Copyright 2015-2019 ForgeRock AS. All Rights Reserved\n\n  Use of this code requires a commercial software license with ForgeRock AS.\n  or with one of its affiliates. All use shall be exclusively subject\n  to such license between the licensee and ForgeRock AS.\n--\x3e\n<div class="pull-right">\n'+(null!=(r=s(n,"if").call(i,null!=t?s(t,"revert"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:9,column:4},end:{line:13,column:11}}}))?r:"")+"    <button data-save "+(null!=(r=s(n,"if").call(i,null!=t?s(t,"saveDisabled"):t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:14,column:22},end:{line:14,column:57}}}))?r:"")+' class="btn btn-primary" type="button">\n        '+e.escapeExpression((s(n,"t")||t&&s(t,"t")||e.hooks.helperMissing).call(i,"common.form.saveChanges",{name:"t",hash:{},data:o,loc:{start:{line:15,column:8},end:{line:15,column:39}}}))+"\n    </button>\n</div>\n"},useData:!0})},1403:function(e,t,n){"use strict";n(143),n(63),n(33),n(27),n(19),n(34),n(1413);var a=n(2),o=n.n(a),r=n(14),i=n.n(r),s=n(100),c=n.n(s),l=n(1414),u=n.n(l),d=n(1233),p=n.n(d),h=n(1416),f=n(214),m=n(142),b=n(1411);function v(e,t){var n=t.schema,a=t.values,o=t.hideInheritance,r=void 0!==o&&o;u.a.plugins.selectize.enable=!0,u.a.plugins.selectize.plugins=function(e){return[{name:"enum_plugin",options:{schema:e}}]},u.a.defaults.themes.openam=h.a.getTheme(6,4);var s=n.toFlatWithInheritanceMeta(a),c=a.removeInheritance();s=s.raw,c=c.raw;var l=new u.a(e[0],{disable_collapse:!0,disable_edit_json:!0,disable_properties:!0,hide_inheritance:r,iconlib:"fontawesome4",schema:s,theme:"openam"});return function(e){var t=p()();i()(e).find(".help-block:not(.errormsg)").addClass("hidden-lg hidden-md hidden-sm").each(function(e,n){var a=i()(t);a.popoverclickaway({container:"#content",html:!0,placement:"auto top",content:n.innerHTML}).click(function(e){e.preventDefault()}),i()(n).parent().append(a)})}(e),function(e){i()(e).find("input:password").attr("placeholder",i.a.t("common.form.passwordPlaceholder"))}(e),l.setValue(c),l}n.n(b).a.define("enum_plugin",function(e){var t,n=this,a=arguments,r=e.schema,i=o.a.indexOf(r.enum,"");i>-1?(n.plugins.settings.dropdown_header={title:r.options.enum_titles[i]},n.require("dropdown_header"),n.setup=(t=n.setup,function(){t.apply(n,a),n.$dropdown.on("mousedown",".selectize-dropdown-header",function(){return n.setValue(""),n.close(),n.blur(),!1})})):function(){var e;n.deleteSelection=(e=n.deleteSelection,function(t){return!!function(e){return!e||8!==e.keyCode}(t)&&e.apply(n,a)})}()});var y=c.a.View.extend({className:"jsoneditor-block",initialize:function(e){if(!(e.schema instanceof f.a))throw new TypeError('[JSONEditorView] "schema" argument is not an instance of JSONSchema.');if(!(e.values instanceof m.a))throw new TypeError('[JSONEditorView] "values" argument is not an instance of JSONValues.');this.options=o.a.defaults(e,{displayTitle:!0})},toggleInheritance:function(e,t,n){this.options.values=this.options.values.extend(this.getData()),this.options.values=this.options.values.addValueForPath([e,"inherited"],n),this.options.values=this.options.values.addValueForPath([e,"value"],t),this.render()},render:function(){this.$el.empty();var e=o.a.get(this.jsonEditor,"watchlist");return this.jsonEditor=v(this.$el,this.options),this.jsonEditor.watchlist=e,this.options.displayTitle||this.$el.find("[data-header]").parent().hide(),this},isValid:function(){return 0===this.jsonEditor.validate().length},getData:function(){var e=new m.a(this.jsonEditor.getValue());return this.options.schema.hasDefaultProperties()&&(e=e.pick(this.options.schema.raw.defaultProperties)),(e=(e=e.nullifyEmptyPasswords(this.options.schema.getPasswordKeys())).addInheritance(this.options.values.raw)).raw},setData:function(e){this.options.values=this.options.values.extend(e)},watch:function(e,t){this.jsonEditor.watch(e,t)},destroy:function(){var e=this,t=o.a.keys(this.jsonEditor.watchlist);o.a.forEach(t,function(t){e.jsonEditor.unwatch(t)}),this.jsonEditor.destroy(),this.jsonEditor=null}});t.a=y},1408:function(e,t,n){"use strict";n(33),n(27),n(34);var a=n(2),o=n.n(a),r=n(100),i=n.n(r),s=n(1403),c=n(214),l=n(142);var u=i.a.View.extend({initialize:function(e){if(!(e.schema instanceof c.a))throw new TypeError('[FlatJSONSchemaView] "schema" argument is not an instance of JSONSchema.');if(!(e.values instanceof l.a))throw new TypeError('[FlatJSONSchemaView] "values" argument is not an instance of JSONValues.');this.options=o.a.defaults(e,{showOnlyRequiredAndEmpty:!1,showOnlyRequired:!1})},render:function(){var e,t=this.options.schema,n=!0;if(this.options.showOnlyRequiredAndEmpty){var a=this.options.schema.getRequiredPropertyKeys(),r=this.options.values.getEmptyValueKeys(t),i=o.a.intersection(a,r);t=t.removeUnrequiredNonDefaultProperties().addDefaultProperties(i),n=!o.a.isEmpty(i)}else if(this.options.showOnlyRequired){var c=this.options.schema.getRequiredPropertyKeys();t=t.removeUnrequiredNonDefaultProperties().addDefaultProperties(c),n=!o.a.isEmpty(c)}return this.subview=new s.a({displayForm:n,hideInheritance:this.options.hideInheritance,displayTitle:!1,el:this.$el,schema:t,values:this.options.values}).render(),(e=this.options.onRendered)&&setTimeout(e,0),this},isValid:function(){return!this.subview||this.subview.isValid()},getData:function(){var e;if(this.subview)return(e=this.subview).getData.apply(e,arguments)},setData:function(e){if(this.subview)return this.options.values=this.options.values.extend(e),this.subview.setData(e)},watch:function(e,t){this.subview&&this.subview.watch(e,t)},destroy:function(){this.subview&&(this.subview.destroy(),this.subview=null)}});t.a=u},1410:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(29),i=n.n(r),s=(n(15),n(36),n(37),n(63),n(33),n(81),n(18),n(27),n(67),n(777),n(62),n(35),n(34),n(2)),c=n(0),l=n.n(c),u=n(16),d=n(778),p=n.n(d),h=(n(159),n(25)),f=function(e){var t=e.children,n=e.disabled,a=e.inProgress,r=e.names,i=e.objectName,s=e.onCancel,c=e.onConfirm,l=e.onExited,d=e.show,p=a?o.a.createElement(h.u.Header,{className:"text-center"},o.a.createElement("span",{className:"fa-stack fa-lg fa-2x text-danger"},o.a.createElement("i",{className:"fa fa-circle fa-stack-2x"}),o.a.createElement("i",{className:"fa fa-refresh fa-spin fa-stack-1x fa-inverse"})),o.a.createElement(h.u.Title,null,Object(u.b)("components.dialogs.delete.titleInProgress"))):o.a.createElement(o.a.Fragment,null,o.a.createElement(h.u.Header,{className:"text-center",closeButton:!n,onHide:s},o.a.createElement("span",{className:"fa-stack fa-lg fa-2x text-danger"},o.a.createElement("i",{className:"fa fa-circle fa-stack-2x"}),o.a.createElement("i",{className:"fa fa-trash fa-stack-1x fa-inverse"})),o.a.createElement(h.u.Title,null,Object(u.b)("components.dialogs.delete.title",{objectName:i}))),o.a.createElement(h.u.Body,null,o.a.createElement("p",{className:"text-center wordwrap",dangerouslySetInnerHTML:{__html:Object(u.b)("components.dialogs.delete.message_interval",{count:r.length,names:r.join(", "),objectName:i,postProcess:"interval"})}}),t),o.a.createElement(h.u.Footer,null,o.a.createElement(h.y,null,o.a.createElement(h.g,{md:6},o.a.createElement(h.c,{block:!0,className:"fr-btn-secondary",disabled:n,onClick:s},Object(u.b)("components.dialogs.delete.no",{objectName:i}))),o.a.createElement(h.g,{md:6},o.a.createElement(h.c,{block:!0,bsStyle:"danger",disabled:n,onClick:c},Object(u.b)("components.dialogs.delete.yes",{objectName:i}))))));return o.a.createElement(h.u,{animation:!0,backdrop:"static",dialogClassName:"dialog-danger",onExited:l,show:d},p)};f.propTypes={children:l.a.node,disabled:l.a.bool,inProgress:l.a.bool,names:l.a.arrayOf(l.a.string).isRequired,objectName:l.a.string.isRequired,onCancel:l.a.func,onConfirm:l.a.func,onExited:l.a.func,show:l.a.bool};var m=f;function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,o=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(o)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var v=p()("0.5s"),y=function(e){var t=e.children,n=e.names,r=e.onCancel,i=e.onConfirm,c=e.onExited,l=e.objectName,d=e.show,p=b(Object(a.useState)(!1),2),h=p[0],f=p[1],y=b(Object(a.useState)(!1),2),g=y[0],w=y[1],S=Object(a.useCallback)(function(){f(!0);var e=Object(s.delay)(function(){return w(!0)},v);i().finally(function(){clearTimeout(e),f(!1)})},[i,f,w]),E=Object(a.useCallback)(function(){w(!1),c()},[c,w]);return o.a.createElement(m,{disabled:h,inProgress:g,names:n,objectName:Object(u.b)("objects.".concat(l),{count:n.length}),onCancel:r,onConfirm:S,onExited:E,show:d},t)};y.defaultProps={onExited:s.noop},y.propTypes={children:l.a.node,names:l.a.arrayOf(l.a.string).isRequired,objectName:l.a.string.isRequired,onCancel:l.a.func,onConfirm:l.a.func.isRequired,onExited:l.a.func,show:l.a.bool};var g=y;function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,o=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(o)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function E(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var O=function(e){var t=e.onCancel,n=e.onConfirm,r=E(e,["onCancel","onConfirm"]),i=S(Object(a.useState)(!0),2),s=i[0],c=i[1],l=Object(a.useCallback)(function(){c(!1),t()},[t,c]),u=Object(a.useCallback)(function(){return Promise.resolve(n()).finally(function(){return c(!1)})},[n,c]);return o.a.createElement(g,w({onCancel:l,onConfirm:u,show:s},r))};O.defaultProps={onCancel:s.noop},O.propTypes={onCancel:l.a.func,onConfirm:l.a.func.isRequired};var T=O;n.d(t,"b",function(){return j}),n.d(t,"a",function(){return g});var j=function(e){var t=e.children,n=e.names,a=e.objectName,r=e.onCancel,s=e.onConfirm,c=document.getElementById("dialog");i.a.render(o.a.createElement(T,{names:n,objectName:a,onCancel:r,onConfirm:s,onExited:function(){return i.a.unmountComponentAtNode(c)}},t),c)}},1433:function(e,t,n){(function(e){var t,n,a,o,r,i,s,c;t=e,a=[],o=!1,r=function(e){clearTimeout(n),n=setTimeout(i,100)},i=function(){for(var e=0,t=a.length;e<t;e++)a[e].apply()},s={register:function(e){a.push(e),!1===o&&(t(window).bind("resize",r),o=!0)},unregister:function(e){for(var t=0,n=a.length;t<n;t++)if(a[t]==e){delete a[t];break}}},(c=function(e,n){this.element=t(e),this.dropdown=t('<li class="dropdown hide pull-right tabdrop"><a class="dropdown-toggle" data-toggle="dropdown" href="#">'+n.text+' <b class="caret"></b></a><ul class="dropdown-menu"></ul></li>').prependTo(this.element),this.element.parent().is(".tabs-below")&&this.dropdown.addClass("dropup"),s.register(t.proxy(this.layout,this)),this.layout()}).prototype={constructor:c,layout:function(){var e=[];this.dropdown.removeClass("hide"),this.element.append(this.dropdown.find("li")).find(">li").not(".tabdrop").each(function(){this.offsetTop>0&&e.push(this)}),e.length>0?(e=t(e),this.dropdown.find("ul").empty().append(e),1==this.dropdown.find(".active").length?this.dropdown.addClass("active"):this.dropdown.removeClass("active")):this.dropdown.addClass("hide")}},t.fn.tabdrop=function(e){return this.each(function(){var n=t(this),a=n.data("tabdrop"),o="object"==typeof e&&e;a||n.data("tabdrop",a=new c(this,t.extend({},t.fn.tabdrop.defaults,o))),"string"==typeof e&&a[e]()})},t.fn.tabdrop.defaults={text:'<i class="icon-align-justify"></i>'},t.fn.tabdrop.Constructor=c}).call(this,n(14))},1439:function(e,t,n){"use strict";n(15),n(36),n(37),n(31),n(143),n(33),n(50),n(373),n(144),n(27),n(67),n(62),n(35),n(34),n(374);var a=n(16),o=n(2),r=n.n(o),i=n(14),s=n.n(i),c=n(100),l=n.n(c),u=n(1410),d=n(1408),p=n(214),h=n(1260),f=n.n(h),m=n(142),b=n(52),v=n(1440),y=n(1524),g=n(41),w=(n(53),n(54),n(25)),S=n(0),E=n.n(S),O=n(1),T=n.n(O),j=n(1471);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function P(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=P(this,I(t).call(this,e))).state={items:[]},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,O["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this;j.a.scripts.getAllDefault(this.props.subSchemaType).then(function(t){e.setState({items:Object(o.sortBy)(t.result,"name")})})}},{key:"render",value:function(){var e=this.state.items.map(function(e){return T.a.createElement(w.r,{href:"#realms/%2F/scripts/edit/".concat(e._id),key:e._id},e.name)});return T.a.createElement(w.q,null,e)}}])&&x(n.prototype,a),r&&x(n,r),t}();k.propTypes={subSchemaType:E.a.string.isRequired};var A=k;function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,o=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(o)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var V=l.a.View.extend({events:{"click [data-subschema-delete]":"onDelete"},initialize:function(e){var t=e.data,n=e.subSchemaTemplate,a=e.getSubSchemaCreatableTypes,o=e.getSubSchemaInstances,r=e.deleteSubSchemaInstance;this.data=t,this.subSchemaTemplate=n,this.getSubSchemaCreatableTypes=a,this.getSubSchemaInstances=o,this.deleteSubSchemaInstance=r},render:function(){var e=this;return Promise.all([this.getSubSchemaInstances(),this.getSubSchemaCreatableTypes()]).then(function(t){var n=_(t,2),a=n[0],r=n[1],i=e.subSchemaTemplate(Object(o.assign)(e.data,{instances:Object(o.sortBy)(a.result,"_id"),creatables:Object(o.sortBy)(r.result,"name"),showDeleteButton:"scripting"!==e.data.serviceType}));e.$el.html(i)}),this},onDelete:function(e){var t=this;e.preventDefault();var n=s()(e.currentTarget),o=n.closest("tr").data("subschemaId"),r=n.closest("tr").data("subschemaType");Object(u.b)({names:[o],objectName:"configuration",onConfirm:function(){return t.deleteSubSchemaInstance(r,o).then(function(){b.a.addMessage({message:Object(a.b)("config.messages.CommonMessages.changesSaved")}),t.render()},function(e){return b.a.addMessage({response:e,type:b.a.TYPE_DANGER})})}})}}),D=n(1441),R=n(1442);function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,o=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(o)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var B={id:r.a.uniqueId("pseudo_tab_"),title:s.a.t("console.common.configuration")},q={id:"subschema",title:s.a.t("console.common.secondaryConfigurations")},$={id:"defaultScripts",title:"Default Scripts"};t.a=l.a.View.extend({partials:{"form/_JSONSchemaFooter":f.a},events:{"click [data-save]":"onSave","click [data-delete]":"onDelete"},initialize:function(e){var t=e.data,n=e.footer,a=e.listRoute,o=e.listRouteArgs,r=e.template,i=e.subSchemaTemplate,s=e.getInstance,c=e.updateInstance,l=e.deleteInstance,u=e.getSubSchemaTypes,d=e.getSubSchemaCreatableTypes,p=e.getSubSchemaInstances,h=e.deleteSubSchemaInstance;this.data=t,this.listRoute=a,this.listRouteArgs=o,this.footer=n||"form/_JSONSchemaFooter",this.template=r,this.subSchemaTemplate=i,this.getInstance=s,this.updateInstance=c,this.deleteInstance=l,this.getSubSchemaTypes=u,this.getSubSchemaCreatableTypes=d,this.getSubSchemaInstances=p,this.deleteSubSchemaInstance=h},createTabComponent:function(e){var t=this;return new D.a({tabs:e,createBody:function(e){return e===q.id?new V({data:t.data,subSchemaTemplate:t.subSchemaTemplate,getSubSchemaCreatableTypes:t.getSubSchemaCreatableTypes,getSubSchemaInstances:t.getSubSchemaInstances,deleteSubSchemaInstance:t.deleteSubSchemaInstance}):e===B.id?new d.a({schema:t.data.schema,values:t.data.values}):e===$.id?new y.default({reactView:A,reactProps:{subSchemaType:t.data.subSchemaInstanceId},needsBaseTemplate:!1}):new d.a({schema:new p.a(t.data.schema.raw.properties[e]),values:new m.a(t.data.values.raw[e])})},createFooter:function(e){if(e!==q.id&&e!==$.id)return new v.a({partial:t.footer})}})},getJSONSchemaView:function(){return this.subview instanceof D.a?this.subview.getBody():this.subview},render:function(){var e=this,t=r()([this.getInstance,this.getSubSchemaTypes]).compact().map(function(e){return e()}).value();return Promise.all(t).then(function(t){var n=F(t,2),a=n[0],o=n[1],i=void 0===o?{}:o;e.data.schema=a.schema,e.data.values=a.values.revertFalseCollections(a.schema),e.data.name=a.name||e.data.values.raw._id,e.data.id||(e.data.id=a.id);var s,c,l=function(e,t,n){var a=[],o=t&&t.length>0;return e.isCollection()?a=a.concat(r()(e.raw.properties).map(function(e,t){return{id:t,order:e.propertyOrder,title:e.title}}).sortBy("order").value()):o&&e.raw.properties&&a.push(B),n&&a.push($),o&&a.push(q),a}(a.schema,i.result,(s=e.data.subSchemaType,c=e.data.subSubSchemaType,"contexts"===s&&r.a.isEmpty(c))),u=!r.a.isEmpty(l);if(e.data.hasTabs=u,e.$el.html(e.template(e.data)),u){if(e.subview=e.createTabComponent(l),e.data.schema.isCollection()){var p={properties:e.data.schema.raw.properties,onChange:function(t,n){e.subview.setTabId(t),e.$el.find('[data-schemapath="root.'.concat(n,'"]')).find("input").focus()}};e.$el.find("[data-tab-search]").append(new R.a(p).render().$el)}}else e.subview=new d.a({schema:a.schema,values:a.values});e.subview.setElement(e.$el.find("[data-json-form]")),e.subview.render()}),this},updateValues:function(){var e,t,n;this.data.schema.isCollection()?this.data.values=this.data.values.extend((e={},t=this.subview.getTabId(),n=this.getJSONSchemaView().getData(),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)).revertFalseCollections(this.data.schema):this.data.values=new m.a(this.getJSONSchemaView().getData())},onSave:function(){if(this.getJSONSchemaView().isValid()){this.updateValues();var e=this.data.values.removeNullPasswords(this.data.schema);this.updateInstance(e.toJSON()).then(function(){b.a.addMessage({message:Object(a.b)("config.messages.CommonMessages.changesSaved")})},function(e){b.a.addMessage({response:e,type:b.a.TYPE_DANGER})})}else b.a.addMessage({message:s.a.t("common.form.validation.errorsNotSaved"),type:b.a.TYPE_DANGER})},onDelete:function(e){var t=this;e.preventDefault(),Object(u.b)({names:[this.data.name],objectName:this.data.objectName,onConfirm:function(){return t.deleteInstance(t.data.values).then(function(){b.a.addMessage({message:Object(a.b)("config.messages.CommonMessages.changesSaved")}),g.a.routeTo(t.listRoute,{args:t.listRouteArgs,trigger:!0})},function(e,t){b.a.addMessage({response:t,type:b.a.TYPE_DANGER})})}})}})},1440:function(e,t,n){"use strict";var a=n(2),o=n.n(a),r=n(100),i=n.n(r),s=n(57),c=n.n(s);t.a=i.a.View.extend({initialize:function(e){if(!o.a.isString(e.partial))throw new TypeError('[PartialBasedView] "partial" argument is not a String.');this.options=e},render:function(){var e=c.a.partials[this.options.partial](this.options.data);return this.$el.html(e),this}})},1441:function(e,t,n){"use strict";n(143),n(1433);var a=n(2),o=n.n(a),r=n(14),i=n.n(r),s=n(100),c=n.n(s),l=n(1238),u=n.n(l),d=n(1239),p=n.n(d);function h(e,t){if(!t[e])throw new TypeError("[TabComponent] Expected all items within 'tabs' to have a '".concat(e,"' attribute."));if(!o.a.isString(t[e]))throw new TypeError("[TabComponent] Expected all items within 'tabs' to have String '".concat(e,"'s."));return!0}var f=c.a.View.extend({template:p.a,bodyTemplate:u.a,events:{"show.bs.tab ul.nav.nav-tabs a":"handleTabClick"},initialize:function(e){if(!(e.tabs instanceof Array))throw new TypeError('[TabComponent] "tabs" argument is not an Array.');if(o.a.isEmpty(e.tabs))throw new TypeError('[TabComponent] "tabs" argument is an empty Array.');o.a.chain(e.tabs).each(o.a.partial(h,"id")).each(o.a.partial(h,"title")).value(),this.options=e},getBody:function(){return this.tabBody},getBodyElement:function(){return this.$el.find("[data-tab-panel]")},getFooter:function(){return this.options.tabFooter},getFooterElement:function(){return this.$el.find("[data-tab-footer]")},getTabId:function(){return this.currentTabId},setTabId:function(e){this.currentTabId=e,this.$el.find('[data-tab-id="'.concat(e,'"]')).tab("show")},handleTabClick:function(e){this.currentTabId=i()(e.currentTarget).data("tab-id"),this.options.tabFooter=this.options.createFooter(this.currentTabId),this.tabBody=this.options.createBody(this.currentTabId);var t=this.bodyTemplate(this.options);this.$el.find("[data-tab-component-panel]").html(t),this.tabBody&&(this.tabBody.setElement(this.getBodyElement()),this.tabBody.render()),this.options.tabFooter&&(this.options.tabFooter.setElement(this.getFooterElement()),this.options.tabFooter.render())},render:function(){var e=this.template(this.options);return this.$el.html(e),this.$el.find(".tab-menu .nav-tabs").tabdrop(),this.setTabId(this.options.tabs[0].id),this}});t.a=f},1442:function(e,t,n){"use strict";n(31),n(143),n(1411);var a=n(2),o=n.n(a),r=n(100),i=n.n(r),s=n(1236),c=n.n(s);var l=i.a.View.extend({initialize:function(e){!function(e){if(!e||!o.a.isObject(e))throw new Error('[TabSearch] No "options" object found.');if(!e.onChange)throw new Error('[TabSearch] No "options.onChange" function found.');if(!e.properties)throw new Error('[TabSearch] No "options.properties" object found.')}(e),this.options=e},render:function(){var e=c()({cssClass:"am-selectize-search",placeholder:"common.form.search",data:"search"});this.$el.html(e);var t,n,a=(t=this.$el.find("[data-search]"),n=this.options.onChange,t.selectize({searchField:["text","value"],onChange:function(e){var t=this.options[e].optgroup;n(t,e),this.clear(!0)},render:{item:function(e){return"<div>".concat(e.text,"</div>")},option:function(e){return"<div><div>".concat(e.text,'</div><span class="text-muted small"><em>').concat(e.value,"</em></span></div></div>")},optgroup_header:function(e){return'<div class="optgroup-header"><span class="text-primary">'.concat(e.label,"</span></div>")}}}),t[0].selectize);return function(e,t){o.a.each(e,function(e,n){t.addOptionGroup(n,{label:e.title||" "}),o.a.each(e.properties,function(e,a){t.addOption({text:e.title,value:a,optgroup:n})})}),t.refreshOptions(!1)}(this.options.properties,a),this}});t.a=l},1471:function(e,t,n){"use strict";n(31);var a=n(122),o=n(23),r=n(38),i=new a.a("".concat(o.a.host).concat(o.a.context,"/json"));i.scripts={getAllDefault:function(e){return i.serviceCall({url:Object(r.a)("/scripts?_pageSize=10&_sortKeys=name&_queryFilter=default eq true and context "+'eq "'.concat(e,'"&_pagedResultsOffset=0'),{realm:!1}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})},getAllContexts:function(){return i.serviceCall({url:Object(r.a)("/global-config/services/scripting/contexts?_queryFilter=true",{realm:!1}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})},getDefaultGlobalContext:function(){return i.serviceCall({url:Object(r.a)("/global-config/services/scripting",{realm:!1}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})},getSchema:function(){return i.serviceCall({url:Object(r.a)("/global-config/services/scripting?_action=schema",{realm:!1}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"})},getContextSchema:function(){return i.serviceCall({url:Object(r.a)("/global-config/services/scripting/contexts?_action=schema",{realm:!1}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"})}},t.a=i},1524:function(e,t,n){"use strict";n.r(t);var a=n(2),o=n.n(a),r=n(100),i=n.n(r),s=n(1),c=n.n(s),l=n(29),u=n.n(l),d=n(20),p=n(43),h=n(23),f=n(279),m=n.n(f);t.default=i.a.View.extend({initialize:function(e){!function(e){if(!e)throw new Error("[ReactAdapterView] No initialization options found.")}(e),function(e){if(!e.reactView)throw new Error('[ReactAdapterView] No "reactView" option found on initialization options.')}(e),this.options=e,o.a.defaults(this.options,{reactProps:{},needsBaseTemplate:!0})},setBaseTemplate:function(){d.a.setProperty("baseTemplate",m.a),p.a.sendEvent(h.a.EVENT_CHANGE_BASE_VIEW)},renderReactComponent:function(){u.a.render(c.a.createElement(this.options.reactView,this.options.reactProps),this.el)},remove:function(){u.a.unmountComponentAtNode(this.el)},render:function(){this.options.needsBaseTemplate?(this.setBaseTemplate(),document.getElementById("wrapper").innerHTML=m()(),this.setElement("#content"),this.renderReactComponent()):this.renderReactComponent()}})}}]);
//# sourceMappingURL=5.a2d3bb03f7.js.map