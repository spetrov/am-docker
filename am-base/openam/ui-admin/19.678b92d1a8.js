(window.webpackJsonp=window.webpackJsonp||[]).push([[19,165,295,296],{1233:function(e,t,n){var a=n(158);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'<a class="btn info-button visible-lg-inline-block visible-md-inline-block visible-sm-inline-block" tabindex="0" data-toggle="popoverclickaway">\n    <i class="fa fa-info-circle"></i>\n</a>\n'},useData:!0})},1235:function(e,t,n){var a=n(158);e.exports=(a.default||a).template({1:function(e,t,n,a,i){return"checked"},3:function(e,t,n,a,i){return"block-header-inactive"},5:function(e,t,n,a,i){return'        <span class="text-muted">schema.raw.description</span>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var s,o=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="form-inline">\n    <label class="am-toggle-switch pull-right">\n        <input data-json-editor-toggle type="checkbox" '+(null!=(s=r(n,"if").call(o,null!=t?r(t,"enablePropertyValue"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:10,column:55},end:{line:10,column:96}}}))?s:"")+' />\n        <span />\n    </label>\n\n    <h3 class="block-header '+(null!=(s=r(n,"unless").call(o,null!=t?r(t,"enablePropertyValue"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:14,column:28},end:{line:14,column:91}}}))?s:"")+'">\n        '+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=t?r(t,"schema"):t)?r(s,"raw"):s)?r(s,"title"):s,t))+"\n    </h3>\n\n"+(null!=(s=r(n,"if").call(o,null!=(s=null!=(s=null!=t?r(t,"schema"):t)?r(s,"raw"):s)?r(s,"description"):s,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:18,column:4},end:{line:20,column:11}}}))?s:"")+"</div>\n\n<div data-toggleable-json-editor/>"},useData:!0})},1256:function(e,t,n){var a=n(158);e.exports=(a.default||a).template({1:function(e,t,n,a,i){return'    <div class="panel panel-default">\n        <div class="panel-body form-group">\n            <form data-json-form></form>\n        </div>\n    </div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=e.invokePartial(c(a,"headers/_Title"),t,{name:"headers/_Title",hash:{title:null!=t?c(t,"title"):t},data:i,helpers:n,partials:a,decorators:e.decorators}))?s:"")+'\n<div class="panel multiple-panels panel-content">\n    <div class="panel panel-default">\n        <div class="panel-body">\n            <div class="form-group">\n                <label class="control-label" for="instanceId">'+l((c(n,"t")||t&&c(t,"t")||r).call(o,"common.form.name",{name:"t",hash:{},data:i,loc:{start:{line:14,column:62},end:{line:14,column:86}}}))+'</label>\n                <input data-instance-id type="text" id="instanceId" class="form-control" required name="instanceId"\n                    placeholder="'+l((c(n,"t")||t&&c(t,"t")||r).call(o,"common.form.validation.required",{name:"t",hash:{},data:i,loc:{start:{line:16,column:33},end:{line:16,column:72}}}))+'">\n            </div>\n        </div>\n    </div>\n\n'+(null!=(s=c(n,"if").call(o,null!=t?c(t,"displayForm"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:21,column:4},end:{line:27,column:11}}}))?s:"")+'\n    <div class="panel-footer clearfix">\n        <div class="pull-right">\n            <button data-cancel class="btn btn-default" type="button">'+l((c(n,"t")||t&&c(t,"t")||r).call(o,"common.form.cancel",{name:"t",hash:{},data:i,loc:{start:{line:31,column:70},end:{line:31,column:96}}}))+'</button>\n            <button data-save class="btn btn-primary" type="button" disabled>'+l((c(n,"t")||t&&c(t,"t")||r).call(o,"common.form.create",{name:"t",hash:{},data:i,loc:{start:{line:32,column:77},end:{line:32,column:103}}}))+"</button>\n        </div>\n    </div>\n</div>\n"},usePartial:!0,useData:!0})},1403:function(e,t,n){"use strict";n(143),n(63),n(33),n(27),n(19),n(34),n(1413);var a=n(2),i=n.n(a),s=n(14),o=n.n(s),r=n(100),l=n.n(r),c=n(1414),u=n.n(c),h=n(1233),d=n.n(h),p=n(1416),m=n(214),f=n(142),v=n(1411);function w(e,t){var n=t.schema,a=t.values,i=t.hideInheritance,s=void 0!==i&&i;u.a.plugins.selectize.enable=!0,u.a.plugins.selectize.plugins=function(e){return[{name:"enum_plugin",options:{schema:e}}]},u.a.defaults.themes.openam=p.a.getTheme(6,4);var r=n.toFlatWithInheritanceMeta(a),l=a.removeInheritance();r=r.raw,l=l.raw;var c=new u.a(e[0],{disable_collapse:!0,disable_edit_json:!0,disable_properties:!0,hide_inheritance:s,iconlib:"fontawesome4",schema:r,theme:"openam"});return function(e){var t=d()();o()(e).find(".help-block:not(.errormsg)").addClass("hidden-lg hidden-md hidden-sm").each(function(e,n){var a=o()(t);a.popoverclickaway({container:"#content",html:!0,placement:"auto top",content:n.innerHTML}).click(function(e){e.preventDefault()}),o()(n).parent().append(a)})}(e),function(e){o()(e).find("input:password").attr("placeholder",o.a.t("common.form.passwordPlaceholder"))}(e),c.setValue(l),c}n.n(v).a.define("enum_plugin",function(e){var t,n=this,a=arguments,s=e.schema,o=i.a.indexOf(s.enum,"");o>-1?(n.plugins.settings.dropdown_header={title:s.options.enum_titles[o]},n.require("dropdown_header"),n.setup=(t=n.setup,function(){t.apply(n,a),n.$dropdown.on("mousedown",".selectize-dropdown-header",function(){return n.setValue(""),n.close(),n.blur(),!1})})):function(){var e;n.deleteSelection=(e=n.deleteSelection,function(t){return!!function(e){return!e||8!==e.keyCode}(t)&&e.apply(n,a)})}()});var y=l.a.View.extend({className:"jsoneditor-block",initialize:function(e){if(!(e.schema instanceof m.a))throw new TypeError('[JSONEditorView] "schema" argument is not an instance of JSONSchema.');if(!(e.values instanceof f.a))throw new TypeError('[JSONEditorView] "values" argument is not an instance of JSONValues.');this.options=i.a.defaults(e,{displayTitle:!0})},toggleInheritance:function(e,t,n){this.options.values=this.options.values.extend(this.getData()),this.options.values=this.options.values.addValueForPath([e,"inherited"],n),this.options.values=this.options.values.addValueForPath([e,"value"],t),this.render()},render:function(){this.$el.empty();var e=i.a.get(this.jsonEditor,"watchlist");return this.jsonEditor=w(this.$el,this.options),this.jsonEditor.watchlist=e,this.options.displayTitle||this.$el.find("[data-header]").parent().hide(),this},isValid:function(){return 0===this.jsonEditor.validate().length},getData:function(){var e=new f.a(this.jsonEditor.getValue());return this.options.schema.hasDefaultProperties()&&(e=e.pick(this.options.schema.raw.defaultProperties)),(e=(e=e.nullifyEmptyPasswords(this.options.schema.getPasswordKeys())).addInheritance(this.options.values.raw)).raw},setData:function(e){this.options.values=this.options.values.extend(e)},watch:function(e,t){this.jsonEditor.watch(e,t)},destroy:function(){var e=this,t=i.a.keys(this.jsonEditor.watchlist);i.a.forEach(t,function(t){e.jsonEditor.unwatch(t)}),this.jsonEditor.destroy(),this.jsonEditor=null}});t.a=y},1408:function(e,t,n){"use strict";n(33),n(27),n(34);var a=n(2),i=n.n(a),s=n(100),o=n.n(s),r=n(1403),l=n(214),c=n(142);var u=o.a.View.extend({initialize:function(e){if(!(e.schema instanceof l.a))throw new TypeError('[FlatJSONSchemaView] "schema" argument is not an instance of JSONSchema.');if(!(e.values instanceof c.a))throw new TypeError('[FlatJSONSchemaView] "values" argument is not an instance of JSONValues.');this.options=i.a.defaults(e,{showOnlyRequiredAndEmpty:!1,showOnlyRequired:!1})},render:function(){var e,t=this.options.schema,n=!0;if(this.options.showOnlyRequiredAndEmpty){var a=this.options.schema.getRequiredPropertyKeys(),s=this.options.values.getEmptyValueKeys(t),o=i.a.intersection(a,s);t=t.removeUnrequiredNonDefaultProperties().addDefaultProperties(o),n=!i.a.isEmpty(o)}else if(this.options.showOnlyRequired){var l=this.options.schema.getRequiredPropertyKeys();t=t.removeUnrequiredNonDefaultProperties().addDefaultProperties(l),n=!i.a.isEmpty(l)}return this.subview=new r.a({displayForm:n,hideInheritance:this.options.hideInheritance,displayTitle:!1,el:this.$el,schema:t,values:this.options.values}).render(),(e=this.options.onRendered)&&setTimeout(e,0),this},isValid:function(){return!this.subview||this.subview.isValid()},getData:function(){var e;if(this.subview)return(e=this.subview).getData.apply(e,arguments)},setData:function(e){if(this.subview)return this.options.values=this.options.values.extend(e),this.subview.setData(e)},watch:function(e,t){this.subview&&this.subview.watch(e,t)},destroy:function(){this.subview&&(this.subview.destroy(),this.subview=null)}});t.a=u},1435:function(e,t,n){"use strict";n(33),n(50),n(27),n(34);var a=n(2),i=n.n(a),s=n(100),o=n.n(s),r=n(1403),l=(n(143),n(214)),c=n(142),u=n(1235),h=n.n(u),d=o.a.View.extend({className:"jsoneditor-block",initialize:function(e){if(!(e.schema instanceof l.a))throw new TypeError('[TogglableJSONEditorView] "schema" argument is not an instance of JSONSchema.');if(!(e.values instanceof c.a))throw new TypeError('[TogglableJSONEditorView] "values" argument is not an instance of JSONValues.');this.options=e,this.options.enablePropertyKey=this.options.schema.getEnableKey(),this.options.enablePropertyValue=this.options.values.raw[this.options.enablePropertyKey],this.options.schema=e.schema.omit(this.options.enablePropertyKey),this.options.values=e.values.omit(this.options.enablePropertyKey)},onEnabledChange:function(e){var t=e.currentTarget.checked;this.options.enablePropertyValue=t,this.$el.find(".block-header").toggleClass("block-header-inactive"),this.options.schema.isEmpty()||(t?this.$el.find("[data-toggleable-json-editor]").slideDown(250):this.$el.find("[data-toggleable-json-editor]").slideUp(250))},render:function(){var e=h()(this.options);return this.$el.html(e),this.$el.find("[data-json-editor-toggle]").change(i.a.bind(this.onEnabledChange,this)),this.jsonEditor=new r.a({el:this.$el.find("[data-toggleable-json-editor]"),displayTitle:!1,schema:this.options.schema,values:this.options.values}),this.options.enablePropertyValue||this.$el.find("[data-toggleable-json-editor]").hide(),this.jsonEditor.render(),this},getData:function(){var e=i.a.clone(this.jsonEditor.getData());return e[this.options.enablePropertyKey]=this.options.enablePropertyValue,e}}),p=function(e){return new(e.schema.hasEnableProperty()?d:r.a)(e)},m=function(e){return Object(a.isEmpty)(e.schema.raw.defaultProperties)},f=function(e){var t=e.schema.getRequiredPropertyKeys();return Object(a.extend)(e,{schema:e.schema.addDefaultProperties(t)})},v=function(e){var t=e.schema.getRequiredPropertyKeys(),n=e.values.getEmptyValueKeys(e.schema),i=Object(a.intersection)(t,n);return Object(a.extend)(e,{schema:e.schema.addDefaultProperties(i)})},w=function(e){return Object(a.isEmpty)(e.schema.raw.defaultProperties)&&e.schema.hasEnableProperty()?Object(a.extend)(e,{schema:e.schema.getEnableProperty().addDefaultProperties([e.schema.getEnableKey()])}):e};var y=o.a.View.extend({initialize:function(e){if(!(e.schema instanceof l.a))throw new TypeError('[GroupedJSONSchemaView] "schema" argument is not an instance of JSONSchema.');if(!e.schema.isCollection())throw new Error("[GroupedJSONSchemaView] Only JSONSchema collections are supported by this view.");if(!(e.values instanceof c.a))throw new TypeError('[GroupedJSONSchemaView] "values" argument is not an instance of JSONValues.');this.options=i.a.defaults(e,{showOnlyRequired:!1,showOnlyRequiredAndEmpty:!1})},render:function(){var e,t=this,n=this.options.schema.getPropertiesAsSchemas(),a=this.options.values.raw,s=this.options.schema.getKeys(!0),o=i.a.map(s,function(e){return{key:e,hideInheritance:t.options.hideInheritance,schema:n[e],values:new c.a(a[e])}});return this.options.showOnlyRequiredAndEmpty?o=i()(o).map(v).map(w).omitBy(m).value():this.options.showOnlyRequired&&(o=i()(o).map(f).map(w).omitBy(m).value()),this.displayForm=!i.a.isEmpty(o),this.subviews=i()(o).map(p).invokeMap("render").each(function(e){e.$el.appendTo(t.$el)}),(e=this.options.onRendered)&&setTimeout(e,0),this},getData:function(){var e=i.a.map(this.subviews,function(e){var t,n,a,i;return e.options.key?(n={},a=e.options.key,i=e.getData(),a in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,t=n):t=e.getData(),t});return i.a.reduce(e,i.a.merge,{})}});t.a=y},1525:function(e,t,n){"use strict";n(143),n(33),n(27),n(34);var a=n(2),i=n.n(a),s=n(100),o=n.n(s),r=n(1408),l=n(1435),c=n(142),u=n(52),h=n(41);t.a=o.a.View.extend({events:{"click [data-save]":"onSave","click [data-cancel]":"onCancel","keyup [data-instance-id]":"onIdChange","change [data-instance-id]":"onIdChange"},onIdChange:function(e){var t=i.a.isEmpty(e.currentTarget.value);this.setCreateEnabled(!t)},setCreateEnabled:function(e){this.$el.find("[data-save]").prop("disabled",!e)},initialize:function(e){var t=e.data,n=e.listRoute,a=e.listRouteArgs,i=e.editRoute,s=e.editRouteArgs,o=e.template,r=e.getInitialState,l=e.createInstance;this.data=t,this.listRoute=n,this.listRouteArgs=a,this.editRoute=i,this.editRouteArgs=s,this.template=o,this.getInitialState=r,this.createInstance=l},render:function(){var e=this;return this.getInitialState().then(function(t){e.schema=t.schema;var n={schema:e.schema,values:t.values,showOnlyRequiredAndEmpty:!0};e.schema.isCollection()?(e.jsonSchemaView=new l.a(n),e.jsonSchemaView.render(),e.data.displayForm=e.jsonSchemaView.displayForm):(e.jsonSchemaView=new r.a(n),e.jsonSchemaView.render(),e.data.displayForm=e.jsonSchemaView.subview.options.displayForm);var a=e.template(e.data);e.$el.html(a),e.$el.find("[data-json-form]").html(e.jsonSchemaView.$el)}),this},onSave:function(){var e=this,t=i.a.cloneDeep(this.jsonSchemaView.getData()),n=this.$el.find("[data-instance-id]").val();t._id=n;var a=new c.a(t).removeNullPasswords(this.schema);this.createInstance(a.raw).then(function(){h.a.routeTo(e.editRoute,{args:e.editRouteArgs(encodeURIComponent(n)),trigger:!0})},function(e){u.a.addMessage({response:e,type:u.a.TYPE_DANGER})})},onCancel:function(){h.a.routeTo(this.listRoute,{args:this.listRouteArgs,trigger:!0})}})}}]);
//# sourceMappingURL=19.678b92d1a8.js.map