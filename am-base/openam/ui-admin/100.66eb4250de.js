(window.webpackJsonp=window.webpackJsonp||[]).push([[100,270,271],{1363:function(e,t,n){var a=n(158);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,l){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(o=e.invokePartial(r(a,"headers/_Title"),t,{name:"headers/_Title",hash:{title:"console.scripts.list.title"},data:l,helpers:n,partials:a,decorators:e.decorators}))?o:"")+'\n<div class="btn-toolbar page-toolbar" role="toolbar" aria-label="toolbar" data-grid-toolbar></div>\n\n<div class="panel panel-default">\n    <div class="panel-body">\n        <div class="table-container"></div>\n    </div>\n</div>\n'},usePartial:!0,useData:!0})},1364:function(e,t,n){var a=n(158);e.exports=(a.default||a).template({1:function(e,t,n,a,l){return" disabled "},3:function(e,t,n,a,l){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"("+e.escapeExpression(e.lambda(null!=(o=null!=t?r(t,"selectedUUIDs"):t)?r(o,"length"):o,t))+")"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,l){var o,r=null!=t?t:e.nullContext||{},i=e.hooks.helperMissing,c=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button type="button" class="btn btn-primary" data-add-entity>\n    <span class="fa fa-plus"></span> '+c((s(n,"t")||t&&s(t,"t")||i).call(r,"console.scripts.list.addNew",{name:"t",hash:{},data:l,loc:{start:{line:9,column:37},end:{line:9,column:72}}}))+'\n</button>\n\n<button type="button" class="btn btn-default" '+(null!=(o=s(n,"unless").call(r,null!=t?s(t,"selectedUUIDs"):t,{name:"unless",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l,loc:{start:{line:12,column:46},end:{line:12,column:92}}}))?o:"")+' data-delete-scripts>\n    <span class="fa fa-close"></span> '+c((s(n,"t")||t&&s(t,"t")||i).call(r,"common.form.delete",{name:"t",hash:{},data:l,loc:{start:{line:13,column:38},end:{line:13,column:64}}}))+" "+(null!=(o=s(n,"if").call(r,null!=t?s(t,"selectedUUIDs"):t,{name:"if",hash:{},fn:e.program(3,l,0),inverse:e.noop,data:l,loc:{start:{line:13,column:65},end:{line:13,column:119}}}))?o:"")+"\n</button>\n"},useData:!0})},1471:function(e,t,n){"use strict";n(31);var a=n(122),l=n(23),o=n(38),r=new a.a("".concat(l.a.host).concat(l.a.context,"/json"));r.scripts={getAllDefault:function(e){return r.serviceCall({url:Object(o.a)("/scripts?_pageSize=10&_sortKeys=name&_queryFilter=default eq true and context "+'eq "'.concat(e,'"&_pagedResultsOffset=0'),{realm:!1}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})},getAllContexts:function(){return r.serviceCall({url:Object(o.a)("/global-config/services/scripting/contexts?_queryFilter=true",{realm:!1}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})},getDefaultGlobalContext:function(){return r.serviceCall({url:Object(o.a)("/global-config/services/scripting",{realm:!1}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})},getSchema:function(){return r.serviceCall({url:Object(o.a)("/global-config/services/scripting?_action=schema",{realm:!1}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"})},getContextSchema:function(){return r.serviceCall({url:Object(o.a)("/global-config/services/scripting/contexts?_action=schema",{realm:!1}),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"})}},t.a=r},1520:function(e,t,n){"use strict";n(144),n(779);var a=n(100),l=n.n(a),o=n(220),r=n(1438),i=n(1445);t.a=l.a.Model.extend({idAttribute:"_id",urlRoot:r.a.substitute("__api__/scripts"),defaults:function(){return{_id:null,name:"",script:"",language:"",context:""}},validate:function(e){return""===e.name.trim()?"scriptErrorNoName":""===e.language?"scriptErrorNoLanguage":void 0},parse:function(e){return e&&e.script&&(e.script=o.a.decodeUTF8(e.script)),e},sync:function(e,t,n){return(n=n||{}).beforeSend=function(e){e.setRequestHeader("Accept-API-Version","protocol=1.0,resource=1.0")},n.error=i.a.errorHandler,"create"!==(e=e.toLowerCase())&&null!==t.id||(n.url="".concat(this.urlRoot(),"/?_action=create")),"create"!==e&&"update"!==e||t.set("script",o.a.encodeUTF8(t.get("script"))),l.a.Model.prototype.sync.call(this,e,t,n)}})},1632:function(e,t,n){var a,l,o;
/*
  backgrid-select-all
  http://github.com/wyuenho/backgrid

  Copyright (c) 2013 Jimmy Yuen Ho Wong and contributors
  Licensed under the MIT @license.
*/l=[n(100),n(1497),n(785)],void 0===(o="function"==typeof(a=function(e,t,n){"use strict";var a=t.Extension.SelectRowCell=e.View.extend({className:"select-row-cell",tagName:"td",events:{"keydown input[type=checkbox]":"onKeydown","change input[type=checkbox]":"onChange","click input[type=checkbox]":"enterEditMode"},initialize:function(e){this.column=e.column,this.column instanceof t.Column||(this.column=new t.Column(this.column));var n=this.column,a=this.model,l=this.$el;this.listenTo(n,"change:renderable",function(e,t){l.toggleClass("renderable",t)}),t.callByNeed(n.renderable(),n,a)&&l.addClass("renderable"),this.listenTo(a,"backgrid:select",function(e,t){this.checkbox().prop("checked",t).change()})},checkbox:function(){return this.$el.find("input[type=checkbox]")},enterEditMode:function(){this.checkbox().focus()},exitEditMode:function(){this.checkbox().blur()},onKeydown:function(e){var n=new t.Command(e);if(n.passThru())return!0;n.cancel()?(e.stopPropagation(),this.checkbox().blur()):(n.save()||n.moveLeft()||n.moveRight()||n.moveUp()||n.moveDown())&&(e.preventDefault(),e.stopPropagation(),this.model.trigger("backgrid:edited",this.model,this.column,n))},onChange:function(){var e=this.checkbox().prop("checked");this.$el.parent().toggleClass("selected",e),this.model.trigger("backgrid:selected",this.model,e)},render:function(){return this.$el.empty().append('<input tabindex="-1" type="checkbox" />'),this.delegateEvents(),this}}),l=t.Extension.SelectAllHeaderCell=a.extend({className:"select-all-header-cell",tagName:"th",initialize:function(e){this.column=e.column,this.column instanceof t.Column||(this.column=new t.Column(this.column));var a=this.collection,l=this.selectedModels={};this.listenTo(a.fullCollection||a,"backgrid:selected",function(e,t){t?l[e.id||e.cid]=1:(delete l[e.id||e.cid],this.checkbox().prop("checked",!1)),n.keys(l).length===(a.fullCollection||a).length&&this.checkbox().prop("checked",!0)}),this.listenTo(a.fullCollection||a,"remove",function(e){delete l[e.id||e.cid],0===(a.fullCollection||a).length&&this.checkbox().prop("checked",!1)}),this.listenTo(a,"backgrid:refresh",function(){if(0===(a.fullCollection||a).length)this.checkbox().prop("checked",!1);else for(var e=this.checkbox().prop("checked"),t=0;t<a.length;t++){var n=a.at(t);(e||l[n.id||n.cid])&&n.trigger("backgrid:select",n,!0)}});var o=this.column,r=this.$el;this.listenTo(o,"change:renderable",function(e,t){r.toggleClass("renderable",t)}),t.callByNeed(o.renderable(),o,a)&&r.addClass("renderable")},onChange:function(){var e=this.checkbox().prop("checked"),t=this.collection;t.each(function(t){t.trigger("backgrid:select",t,e)}),t.fullCollection&&t.fullCollection.each(function(n){t.get(n.cid)||n.trigger("backgrid:selected",n,e)}),this.collection.trigger("backgrid:select-all",this.collection,e)}});t.Grid.prototype.getSelectedModels=function(){for(var e,t=this.header.row.cells,n=0,a=t.length;n<a;n++){var o=t[n];if(o instanceof l){e=o;break}}var r=[];if(e){var i=e.selectedModels,c=this.collection.fullCollection||this.collection;for(var s in i)r.push(c.get(s))}return r},t.Grid.prototype.clearSelectedModels=function(){for(var e=this.getSelectedModels(),t=0,n=e.length;t<n;t++){var a=e[t];a.trigger("backgrid:select",a,!1)}}})?a.apply(t,l):a)||(e.exports=o)},1738:function(e,t,n){"use strict";n.r(t);n(15),n(36),n(37),n(143),n(115),n(33),n(50),n(27),n(67),n(62),n(124),n(35),n(34),n(1486),n(1496);var a=n(16),l=n(2),o=n.n(l),r=n(14),i=n.n(r),c=n(100),s=n.n(c),d=n(123),u=n(1460),h=n(1465),p=n(1429),g=n(52),m=n(41),f=n(1520),b=n(1471),v=n(1363),y=n.n(v),x=n(1364),k=n.n(x);n(1632);u.a.Extension.ThemeableSelectAllCell=u.a.Extension.SelectRowCell.extend({onChange:function(){var e=this.$el.find("input[type=checkbox]").prop("checked");this.$el.parent().toggleClass("info",e),this.model.trigger("backgrid:selected",this.model,e)}});var C=u.a.Extension.ThemeableSelectAllCell,w=n(1438);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,l=!1,o=void 0;try{for(var r,i=e[Symbol.iterator]();!(a=(r=i.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.default=d.a.extend({template:y.a,toolbarTemplate:k.a,events:{"click [data-add-entity]":"addNewScript","click [data-delete-scripts]":"onDeleteClick"},render:function(e,t){var n=this;this.realmPath=e[0],this.data.selectedUUIDs=[],this.contextSchemaPromise=b.a.scripts.getSchema(),this.languageSchemaPromise=b.a.scripts.getContextSchema();var l=s.a.PageableCollection.extend({url:w.a.substitute("__api__/scripts"),model:f.a,state:h.a.getState(),queryParams:h.a.getQueryParams(),parseState:h.a.parseState,parseRecords:h.a.parseRecords,sync:h.a.sync}),o=function(){var e=this.model.get(this.column.get("name")),t=this.map&&n[this.map]?n[this.map][e]:e;return this.$el.text(t),this},r=[{name:"",cell:C,headerCell:"select-all"},{name:"name",label:Object(a.b)("console.scripts.list.grid.0"),cell:"string",headerCell:h.a.FilterHeaderCell,sortType:"toggle",editable:!1},{name:"context",label:Object(a.b)("console.scripts.list.grid.1"),cell:u.a.StringCell.extend({map:"contextMap",render:o}),headerCell:h.a.FilterHeaderCell,sortType:"toggle",editable:!1},{name:"language",label:Object(a.b)("console.scripts.list.grid.2"),cell:u.a.StringCell.extend({map:"langMap",render:o}),headerCell:h.a.FilterHeaderCell,sortType:"toggle",editable:!1},{name:"description",label:Object(a.b)("console.scripts.list.grid.3"),cell:"string",sortable:!1,editable:!1}],c=h.a.ClickableRow.extend({attributes:function(){return{tabindex:0}},callback:function(e){var t=i()(e.target);t.is("input")||t.is(".select-row-cell")||m.a.routeTo(m.a.configuration.routes.realmsScriptEdit,{args:[encodeURIComponent(n.realmPath),encodeURIComponent(this.model.id)],trigger:!0})}});this.data.scripts=new l,this.data.scripts.on("backgrid:selected",function(e,t){n.onRowSelect(e,t)}),this.data.scripts.on("backgrid:sort",h.a.doubleSortFix);var d=new u.a.Grid({columns:r,row:c,collection:n.data.scripts,className:"backgrid table table-hover",emptyText:Object(a.b)("console.common.noResults")}),p=new u.a.Extension.ThemeablePaginator({collection:n.data.scripts,windowSize:3});this.parentRender(function(){this.renderToolbar(),this.$el.find(".table-container").append(d.render().el),this.$el.find(".panel-body").append(p.render().el),Promise.all([this.contextSchemaPromise,this.languageSchemaPromise]).then(function(e){var a=S(e,2),l=a[0],o=a[1],r=o?o.properties.languages.items:void 0,i=l?l.properties.defaultContext:void 0;n.langMap=n.createMapBySchema(r),n.contextMap=n.createMapBySchema(i),n.data.scripts.fetch({reset:!0}).then(function(){t&&t()})})})},onDeleteClick:function(e){var t={message:Object(a.b)("console.scripts.list.confirmDeleteText")};e.preventDefault(),p.a.showConfirmationBeforeDeleting(t,o.a.bind(this.deleteRecords,this))},deleteRecords:function(){for(var e=this,t=0,n=function(){e.data.selectedUUIDs=[],e.data.scripts.fetch({reset:!0}),e.renderToolbar(),g.a.addMessage({message:Object(a.b)("config.messages.CommonMessages.changesSaved")})};t<this.data.selectedUUIDs.length;t++)this.data.scripts.get(this.data.selectedUUIDs[t]).destroy({success:n,wait:!0})},onRowSelect:function(e,t){t?o.a.includes(this.data.selectedUUIDs,e.id)||this.data.selectedUUIDs.push(e.id):this.data.selectedUUIDs=o.a.without(this.data.selectedUUIDs,e.id),this.renderToolbar()},renderToolbar:function(){var e=this.toolbarTemplate(this.data);this.$el.find("[data-grid-toolbar]").html(e)},addNewScript:function(){m.a.routeTo(m.a.configuration.routes.realmsScriptNew,{args:[encodeURIComponent(this.realmPath)],trigger:!0})},createMapBySchema:function(e){var t,n,a;if(e&&e.enum)for(t={},a=e.enum.length,n=0;n<a;n++)t[e.enum[n]]=e.options.enum_titles[n];return t}})}}]);
//# sourceMappingURL=100.66eb4250de.js.map